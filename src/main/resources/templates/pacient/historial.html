<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
	<meta name="description" content="POS - Bootstrap Admin Template">
	<meta name="keywords" content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects">
	<meta name="author" content="Dreamguys - Bootstrap Admin Template">
	<meta name="robots" content="noindex, nofollow">
	<title>SaintMedic</title>

	<!-- Favicon -->
	<link rel="shortcut icon" type="image/x-icon" href="assets_superAdmin/img/favicon.png">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="../assets_superAdmin/css/bootstrap.min.css">

	<!-- Datetimepicker CSS -->
	<link rel="stylesheet" href="../assets_superAdmin/css/bootstrap-datetimepicker.min.css">

	<!-- animation CSS -->
	<link rel="stylesheet" href="../assets_superAdmin/css/animate.css">

	<!-- Select2 CSS -->
	<link rel="stylesheet" href="../assets_superAdmin/plugins/select2/css/select2.min.css">

	<!-- Datatable CSS -->
	<link rel="stylesheet" href="../assets_superAdmin/css/dataTables.bootstrap4.min.css">

	<!-- Fontawesome CSS -->
	<link rel="stylesheet" href="../assets_superAdmin/plugins/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="../assets_superAdmin/plugins/fontawesome/css/all.min.css">

	<!-- Main CSS -->
	<link rel="stylesheet" href="../assets_superAdmin/css/style.css">
	<link rel="shortcut icon" type="image/x-icon" href="../assets_superAdmin/img/PastillaSinFondo.png">

	<style>
		.user-menu {
			display: flex;
			align-items: center; /* Esto centra verticalmente los hijos del contenedor */


			gap: 20px; /* Ajusta el valor según necesites */


		}
		body {
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
		}


	</style>
	<script>
		function numeroOrden7digits() {
			let orderNumber = Math.floor(1000000 + Math.random() * 9000000);
			document.getElementById("orderNumber").innerText = "Order Number: " + orderNumber;
		}
		window.onload = numeroOrden7digits;
	</script>


</head>
<body >
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
	<defs>
		<symbol xmlns="http://www.w3.org/2000/svg" id="link" viewBox="0 0 24 24">
			<path fill="currentColor" d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3Zm1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="arrow-right" viewBox="0 0 24 24">
			<path fill="currentColor" d="M17.92 11.62a1 1 0 0 0-.21-.33l-5-5a1 1 0 0 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l5-5a1 1 0 0 0 .21-.33a1 1 0 0 0 0-.76Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="category" viewBox="0 0 24 24">
			<path fill="currentColor" d="M19 5.5h-6.28l-.32-1a3 3 0 0 0-2.84-2H5a3 3 0 0 0-3 3v13a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-10a3 3 0 0 0-3-3Zm1 13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-13a1 1 0 0 1 1-1h4.56a1 1 0 0 1 .95.68l.54 1.64a1 1 0 0 0 .95.68h7a1 1 0 0 1 1 1Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="calendar" viewBox="0 0 24 24">
			<path fill="currentColor" d="M19 4h-2V3a1 1 0 0 0-2 0v1H9V3a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3Zm1 15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-7h16Zm0-9H4V7a1 1 0 0 1 1-1h2v1a1 1 0 0 0 2 0V6h6v1a1 1 0 0 0 2 0V6h2a1 1 0 0 1 1 1Z"/>
		</symbol>

		<symbol xmlns="http://www.w3.org/2000/svg" id="plus" viewBox="0 0 24 24">
			<path fill="currentColor" d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="minus" viewBox="0 0 24 24">
			<path fill="currentColor" d="M19 11H5a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="cart" viewBox="0 0 24 24">
			<path fill="currentColor" d="M8.5 19a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 8.5 19ZM19 16H7a1 1 0 0 1 0-2h8.491a3.013 3.013 0 0 0 2.885-2.176l1.585-5.55A1 1 0 0 0 19 5H6.74a3.007 3.007 0 0 0-2.82-2H3a1 1 0 0 0 0 2h.921a1.005 1.005 0 0 1 .962.725l.155.545v.005l1.641 5.742A3 3 0 0 0 7 18h12a1 1 0 0 0 0-2Zm-1.326-9l-1.22 4.274a1.005 1.005 0 0 1-.963.726H8.754l-.255-.892L7.326 7ZM16.5 19a1.5 1.5 0 1 0 1.5 1.5a1.5 1.5 0 0 0-1.5-1.5Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="check" viewBox="0 0 24 24">
			<path fill="currentColor" d="M18.71 7.21a1 1 0 0 0-1.42 0l-7.45 7.46l-3.13-3.14A1 1 0 1 0 5.29 13l3.84 3.84a1 1 0 0 0 1.42 0l8.16-8.16a1 1 0 0 0 0-1.47Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="trash" viewBox="0 0 24 24">
			<path fill="currentColor" d="M10 18a1 1 0 0 0 1-1v-6a1 1 0 0 0-2 0v6a1 1 0 0 0 1 1ZM20 6h-4V5a3 3 0 0 0-3-3h-2a3 3 0 0 0-3 3v1H4a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2ZM10 5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h-4Zm7 14a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8h10Zm-3-1a1 1 0 0 0 1-1v-6a1 1 0 0 0-2 0v6a1 1 0 0 0 1 1Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="star-outline" viewBox="0 0 15 15">
			<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M7.5 9.804L5.337 11l.413-2.533L4 6.674l2.418-.37L7.5 4l1.082 2.304l2.418.37l-1.75 1.793L9.663 11L7.5 9.804Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="star-solid" viewBox="0 0 15 15">
			<path fill="currentColor" d="M7.953 3.788a.5.5 0 0 0-.906 0L6.08 5.85l-2.154.33a.5.5 0 0 0-.283.843l1.574 1.613l-.373 2.284a.5.5 0 0 0 .736.518l1.92-1.063l1.921 1.063a.5.5 0 0 0 .736-.519l-.373-2.283l1.574-1.613a.5.5 0 0 0-.283-.844L8.921 5.85l-.968-2.062Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="search" viewBox="0 0 24 24">
			<path fill="currentColor" d="M21.71 20.29L18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 7-7a7 7 0 0 1-7 7Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="user" viewBox="0 0 24 24">
			<path fill="currentColor" d="M15.71 12.71a6 6 0 1 0-7.42 0a10 10 0 0 0-6.22 8.18a1 1 0 0 0 2 .22a8 8 0 0 1 15.9 0a1 1 0 0 0 1 .89h.11a1 1 0 0 0 .88-1.1a10 10 0 0 0-6.25-8.19ZM12 12a4 4 0 1 1 4-4a4 4 0 0 1-4 4Z"/>
		</symbol>
		<symbol xmlns="http://www.w3.org/2000/svg" id="close" viewBox="0 0 15 15">
			<path fill="currentColor" d="M7.953 3.788a.5.5 0 0 0-.906 0L6.08 5.85l-2.154.33a.5.5 0 0 0-.283.843l1.574 1.613l-.373 2.284a.5.5 0 0 0 .736.518l1.92-1.063l1.921 1.063a.5.5 0 0 0 .736-.519l-.373-2.283l1.574-1.613a.5.5 0 0 0-.283-.844L8.921 5.85l-.968-2.062Z"/>
		</symbol>
	</defs>
</svg>
<div id="global-loader" >
	<div class="whirly-loader"> </div>
</div>

<!-- Main Wrapper -->

	<!-- Header -->
	<nav th:replace="navbarPaciente :: navbar(activeTab = 'historial')"> </nav>

	<!-- Header -->

	<!-- Sidebar -->

	<!-- /Sidebar -->

	<div class="content" style="margin-top: 1%;">
		<!-- /product list -->
			<div class="card ms-5 me-5 mt-5">
				<div class="card-body">
					<div class="page-header" style="margin-bottom: 1%">
						<div class="page-title">
							<h4>Historial de órdenes</h4>
						</div>
					</div>

					<div class="table-top">
						<div class="search-set">
							<div class="search-path">
								<a class="btn btn-filter" id="filter_search">
									<img src="../assets_superAdmin/img/icons/filter.svg" alt="img">
									<span><img src="../assets_superAdmin/img/icons/closes.svg" alt="img"></span>
								</a>
							</div>
							<div class="search-input">
								<a class="btn btn-searchset"><img src="../assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
							</div>
						</div>
					</div>
					<div class="card" id="filter_inputs">
						<div class="card-body pb-0">
							<div class="row">
								<div class="col-lg col-sm-6 col-12">
									<div class="form-group">
										<input type="text" class="datetimepicker cal-icon" placeholder="Escoge fecha" >
									</div>
								</div>
								<div class="col-lg col-sm-6 col-12">
									<div class="form-group">
										<input type="text" placeholder="Ingrese Número">
									</div>
								</div>

								<div class="col-lg col-sm-6 col-12">
									<div class="form-group">
										<select class="select">
											<option>Escoge estado</option>
											<option>En proceso</option>
										</select>
									</div>
								</div>
								<div class="col-lg col-sm-6 col-12">
									<div class="form-group">
										<select class="select">
											<option>Escoja estado de pago</option>
											<option>Estado de pago</option>
										</select>
									</div>
								</div>
								<div class="col-lg-1 col-sm-6 col-12">
									<div class="form-group">
										<a class="btn btn-filters ms-auto"><img src="../assets_superAdmin/img/icons/search-whites.svg" alt="img"></a>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- /Filter -->
					<div class="table-responsive">
						<table class="table datanew">
							<thead>
								<tr>
									<th>Número de Orden</th>
									<th>Detalle</th>
									<th>Fecha de emisión</th>
									<th>Estado</th>
									<th>Costo (S/.)</th>
									<th>Estado de Pago</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="compras : ${listaCompras}">

									<td th:text="${compras.getIdPurchaseOrder()}" class="text-bolds"></td>
									<td>
										<a  type="button">
											<img th:id="|${compras.getIdPurchaseOrder()}|" src="../assets_superAdmin/img/transaccion.png" width="30" alt="img">
										</a>
									</td>
									<script th:inline="javascript" >
												document.getElementById([[${compras.getIdPurchaseOrder()}]]).onclick =
														function() {
													data = {idPurchase: [[${compras.getIdPurchaseOrder()}]] }
													$.ajax({
														url: "/patient/verDetalleCompra",
														type: "POST",
														data: data ,
														success : function (response) {
															var Header =  "<table class=\"table\">\n                                                                  <thead>\n                                                                    <tr>\n                                                                      <th>#</th>\n                                                                      <th>Medicamento</th>\n                                                                                                                                           \n                                                                      <th>Cantidad</th>\n                                                                    </tr>\n                                                                  </thead>\n                                                                  <tbody>";
															var rowx;
															var count = 1;
															var rows = "";
															response.forEach(function (producto) {
																var aux = JSON.parse(producto)
																rowx =
																		'<tr> ' +
																		'<td>' + count + '</td>' +
																		'<td>' + aux.medicineName + '</td>'
																		+
																		'<td>' + aux.cantidad + '</td>'
																		+
																		'</tr>'
																;
																rows = rows + rowx;
																count++;
															})
															Swal.fire({
																title: 'Medicamentos de la orden de reposición',
																html: Header+rows,
																confirmButtonColor: "#dd986a"
															})
														}
													});
												}
									</script>
									<td th:text="${compras.getFecha()}"></td>
									<td th:text="${compras.getEstado()}"></td>
									<td th:text="${compras.getTotal_price()}"></td>
									<td > <span th:if="${compras.getEstadoPago() eq 'por pagar'}">
       						 <a th:href="@{'/patient/verDatosPago?idPurchase=' + ${compras.getIdPurchaseOrder()}}"><span class="badges bg-lightred">Por pagar</span></a>
    							</span>
										<span th:unless="${compras.getEstadoPago() eq 'por pagar'}" th:text="${compras.getEstadoPago()}"></span></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		<!-- /product list -->
	</div>

<!-- /Main Wrapper -->

<!-- jQuery -->
<script src="../assets_superAdmin/js/jquery-3.6.0.min.js"></script>

<!-- Feather Icon JS -->
<script src="../assets_superAdmin/js/feather.min.js"></script>

<!-- Slimscroll JS -->
<script src="../assets_superAdmin/js/jquery.slimscroll.min.js"></script>

<!-- Datatable JS -->
<script src="../assets_superAdmin/js/jquery.dataTables.min.js"></script>
<script src="../assets_superAdmin/js/dataTables.bootstrap4.min.js"></script>

<!-- Bootstrap Core JS -->
<script src="../assets_superAdmin/js/bootstrap.bundle.min.js"></script>

<!-- Datetimepicker JS -->
<script src="../assets_superAdmin/js/moment.min.js"></script>
<script src="../assets_superAdmin/js/bootstrap-datetimepicker.min.js"></script>

<!-- Select2 JS -->
<script src="../assets_superAdmin/plugins/select2/js/select2.min.js"></script>

<!-- Sweetalert 2 -->
<script src="../assets_superAdmin/plugins/sweetalert/sweetalert2.all.min.js"></script>
<script src="../assets_superAdmin/plugins/sweetalert/sweetalerts.min.js"></script>

<!-- Custom JS -->
<script src="../assets_superAdmin/js/script.js"></script>

</body>
</html>