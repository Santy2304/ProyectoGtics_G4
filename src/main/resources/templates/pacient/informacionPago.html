<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>SaintMedic</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="author" content="">
        <meta name="keywords" content="">
        <meta name="description" content="">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/Food/vendor.css">
        <link rel="stylesheet" type="text/css" href="/Food/normalize.css">
        <link rel="stylesheet" type="text/css" href="/Food/style.css">
        <link rel="stylesheet" type="text/css" href="/style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/assets_pacient/css/dataTables.bootstrap4.min.css">
        <link rel="stylesheet" href="/assets_pacient/plugins/select2/css/select2.min.css">
        <link rel="stylesheet" href="/assets_pacient/plugins/fontawesome/css/fontawesome.min.css">
        <link rel="stylesheet" href="/assets_pacient/plugins/fontawesome/css/all.min.css">
        <link rel="stylesheet" href="/assets_pacient/plugins/select2/css/select2.min.css">
        <link rel="icon" href="/assets_pacient/img/PastillaSinFondo.png" >
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" charset="UTF-8"></script>
        <link rel="stylesheet" href="/assets_pacient/css/bootstrap.min.css">

        <!-- animation CSS -->
        <link rel="stylesheet" href="/assets_pacient/css/animate.css">

        <!-- Datatable CSS -->
        <link rel="stylesheet" href="/assets_pacient/css/dataTables.bootstrap4.min.css">

        <!-- Fontawesome CSS -->
        <link rel="stylesheet" href="/assets_pacient/plugins/fontawesome/css/fontawesome.min.css">
        <link rel="stylesheet" href="/assets_pacient/plugins/fontawesome/css/all.min.css">

        <!-- Main CSS -->
        <link rel="stylesheet" href="/assets_pacient/css/style.css">

        <link rel="stylesheet" href="/assets_pacient/css/bootstrap-datetimepicker.min.css">
    </head>
    <body>
        <div id="global-loader" >
            <div class="whirly-loader"> </div>
        </div>

            <div class="main-wrapper">
                <div th:replace="navbarPacienteNuevo"></div>
                <!-- Header -->
                <!-- Sidebar -->
                <div th:replace="sidebarPatient :: sidebarPatient(activeTab = 'pago')"> </div>


                <div class="page-wrapper pagehead">

                    <div class="content py-3" >

                        <div class="card">

                            <div class="card-body">

                                <h5 class="card-title">Tarjetas Guardadas</h5>
                                <p class="card-text">Guardamos sus medios de pago favoritos de manera segura.</p>

                                <div class="card-body">

                                    <div class="table-responsive">

                                        <table class="table mb-0">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Número de Tarjeta</th>
                                                    <th>Banco</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="tarjeta,obj : ${listaTarjetas}">
                                                    <td th:text="${obj.index+1}"></td>
                                                    <td th:text="${tarjeta.getNumberCard()}"></td>
                                                    <td th:text="${tarjeta.getBank()}"></td>
                                                    <td>
                                                        <a th:if="${!tarjeta.getPrefered()}" th:href="@{'/patient/marcarTarjetaPreferida?idTarjeta=' + ${tarjeta.idCredit}}" class="text-decoration-none">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                                                                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.56.56 0 0 0-.163-.505L1.71 6.745l4.052-.576a.53.53 0 0 0 .393-.288L8 2.223l1.847 3.658a.53.53 0 0 0 .393.288l4.052.575-2.906 2.77a.56.56 0 0 0-.163.506l.694 3.957-3.686-1.894a.5.5 0 0 0-.461 0z"/>
                                                            </svg>
                                                        </a>
                                                        <a th:if="${tarjeta.getPrefered()}" href="#" class="text-decoration-none">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                                                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                                            </svg>
                                                        </a>


                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="container mt-3">
                                    <div class="col">
                                        <form method="post" th:action="@{/patient/agregarTarjetaUsuario}">
                                            <h5 class="card-title">Usar y agregar otra tarjeta</h5>
                                            <div class="form-row row mx-1">
                                                <div th:if="${msg != null}" th:text="${msg}" class="alert alert-danger" role="alert"></div>

                                                <div class="col-md-6 mb-3">
                                                    <label class="mb-2" for="validationServer01">Nueva Tarjeta</label>
                                                    <input type="text" class="form-control" name="numberCard" id="validationServer01" placeholder="**** **** **** ****" required>
                                                </div>
                                            </div>

                                            <h5 class="card-title">Credenciales</h5>


                                            <div class="form-row row mx-1">

                                                <div class="col-md-4 mb-3">
                                                    <input type="text" name="cvv" class="form-control" id="validationServer02" placeholder="CVV" required>

                                                </div>

                                                <div class="col-md-4 mb-3">
                                                    <input type="text" name="fechaV" class="form-control" style="width: auto" id="validationServer03" placeholder="Fecha de Vencimiento ( / )  " required pattern="(0[1-9]|1[0-2])\/[0-9]{2}">
                                                    <div class="invalid-feedback">Formato inválido. Use MM/YY</div>

                                                </div>

                                            </div>

                                            <button class="btn btn-primary mt-2" type="submit">Aceptar</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                <script>
                    document.getElementById("expireDate").addEventListener("input", function(event) {
                        const pattern = /^(0[1-9]|1[0-2])\/[0-9]{2}$/;
                        const value = event.target.value;
                        if (!pattern.test(value)) {
                            event.target.setCustomValidity("Formato inválido. Use MM/YY");
                        } else {
                            event.target.setCustomValidity("");
                        }
                    });
                </script>

        <script src="/assets_superAdmin/js/jquery-3.6.0.min.js"></script>

        <!--Feather Icon JS-->
        <script src="/assets_superAdmin/js/feather.min.js"></script>

        <!--Slimscroll JS-->
        <script src="/assets_superAdmin/js/jquery.slimscroll.min.js"></script>

        <!-- Datatable JS-->
        <script src="/assets_superAdmin/js/jquery.dataTables.min.js"></script>
        <script src="/assets_superAdmin/js/dataTables.bootstrap4.min.js"></script>

        <!--Bootstrap Core JS-->
        <script src="/assets_superAdmin/js/bootstrap.bundle.min.js"></script>-->

        <!--Select2 JS-->
        <script src="/assets_superAdmin/plugins/select2/js/select2.min.js"></script>

        <!-- Sweetalert 2-->
        <script src="/assets_superAdmin/plugins/sweetalert/sweetalert2.all.min.js"></script>
        <script src="/assets_superAdmin/plugins/sweetalert/sweetalerts.min.js"></script>

        <!-- Custom JS-->
        <script src="/assets_superAdmin/js/script.js"></script>
    </body>
</html>