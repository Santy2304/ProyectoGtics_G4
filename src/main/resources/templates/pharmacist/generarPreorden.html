<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="POS - Bootstrap Admin Template">
    <meta name="keywords" content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects">
    <meta name="author" content="Dreamguys - Bootstrap Admin Template">
    <meta name="robots" content="noindex, nofollow">
    <title>Saint Medic</title>

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/assets_superAdmin/img/PastillaSinFondo.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/assets_superAdmin/css/bootstrap.min.css">

    <!-- animation CSS -->
    <link rel="stylesheet" href="/assets_superAdmin/css/animate.css">

    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="/assets_superAdmin/plugins/owlcarousel/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets_superAdmin/plugins/owlcarousel/owl.theme.default.min.css">

    <!-- Select2 CSS -->
    <link rel="stylesheet" href="/assets_superAdmin/plugins/select2/css/select2.min.css">

    <!-- Datetimepicker CSS -->
    <link rel="stylesheet" href="/assets_superAdmin/css/bootstrap-datetimepicker.min.css">


    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="/assets_superAdmin/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="/assets_superAdmin/plugins/fontawesome/css/all.min.css">

    <!-- Main CSS -->
    <link rel="stylesheet" href="/assets_superAdmin/css/style.css">


</head>
<body >

<div id="global-loader" >
    <div class="whirly-loader"> </div>
</div>

<div class="main-wrappers">
    <div th:replace="headerFarmacista"></div>

    <!--sideBar-->
    <div th:replace="sidebarFarmacista:: sidebarFarmacista(activeTab = 'pos')"> </div>

    <!-- /Sidebar -->

        <div class="page-wrapper">
            <div class="content">
                <div class="page-header">
                    <div class="page-header">
                        <div class="page-title">
                            <h2>Generar preorden</h2>
                            <h6>La solicitud de preorden se debe realizar por lo menos 3 días de anticipación</h6>
                            <h6>Aquí aparecen listados solo los medicamentos que no tienen stock<br> Ingresa directamente la cantidad del medicamento que deseas pedir y presiona el botón "Generar Preorden"</h6>
                        </div>
                    </div>
                    <div class="page-btn">
                        <a id="GenerarReposicion" class="btn btn-added"><img src="/assets_superAdmin/img/icons/plus.svg" alt="img" class="me-2">Generar reposición</a>
                    </div>
                    <script>
                        $("#GenerarReposicion").click( function(){
                            var formulario = document.getElementById("MyForm");
                            var inputs = formulario.querySelectorAll('input');
                            var errorNegativo = 0;
                            var errorLetra = 0;
                            var cantidadAceptable = 0;
                            var numeroParseado = 0;
                            var arregloValidoValue = [];
                            var arregloValidoId = [];
                            var cantidadCeros = 0;
                            inputs.forEach(function(input){
                                try{
                                    if(0 == input.value){
                                        cantidadCeros++;
                                    }
                                    numeroParseado = parseInt(input.value);
                                    if(numeroParseado<0){
                                        errorNegativo++;
                                    }else{
                                        arregloValidoValue.push(input.value);
                                        arregloValidoId.push(input.id);
                                        cantidadAceptable++;
                                    }
                                } catch (error) {
                                    errorLetra++;
                                }
                            });
                            console.log(arregloValidoValue);
                            console.log(arregloValidoId);
                            if(cantidadCeros === inputs.length){
                                Swal.fire({
                                    icon: "error",
                                    iconColor: 'brown',
                                    text: "Debes ingresar alguna cantidad en los productos para realizar el pedido de reposición",
                                    confirmButtonColor: "#dd986a"
                                })
                            }else{
                                if(errorNegativo!==0 || errorLetra!==0 ){
                                    Swal.fire({
                                        icon: "error",
                                        iconColor: 'brown',
                                        text: "Ingresaste alguna cantidad incoherente!",
                                        confirmButtonColor: "#dd986a"
                                    })
                                }else{
                                    if(cantidadAceptable<=10){
                                        async function auxiliar(){
                                            const { value: date } = await Swal.fire({
                                                title: "Escoge la fecha de llegada del pedido de reposición",
                                                confirmButtonText: "Generar",
                                                cancelButtonText: "Regresar",
                                                cancelButtonColor: "rgba(248,215,48,0.87)",
                                                showCancelButton: true,
                                                confirmButtonColor: "#dd986a",
                                                input: "date",
                                                didOpen: () => {
                                                    const today = (new Date()).toISOString();
                                                    Swal.getInput().min = today.split("T")[0];
                                                }
                                            });
                                            if (date) {
                                                //Poner alguna condicion para las fechas acá
                                                $.ajax({
                                                    url:"/adminSede/generarReposicion",
                                                    data: JSON.stringify({ cantidad: arregloValidoValue , ids : arregloValidoId ,date:date  }),
                                                    type: "POST",
                                                    contentType: "application/json",
                                                    success: function(data){
                                                        switch(data.error){
                                                            case "":
                                                                window.location.href = data.response;
                                                                break;
                                                            case "errorMenorADiez":
                                                                Swal.fire({
                                                                    icon: "error",
                                                                    title: "Oops...",
                                                                    text: "Ingresaste más de 10 medicamentos en el pedido de reposición!",
                                                                });
                                                                break;
                                                            case "errorDiferenteCero":
                                                                Swal.fire({
                                                                    icon: "error",
                                                                    title: "Oops...",
                                                                    text: "No ingresaste ningún medicamento en el pedido de reposición!",
                                                                });
                                                                break;
                                                            case "errorMedicamentosNoCoinciden":
                                                                Swal.fire({
                                                                    icon: "error",
                                                                    title: "Oops...",
                                                                    text: "No se pueden pedir reposiciones de medicamentos que tengan un stock mayor a 25 unidades!",
                                                                });
                                                                break;
                                                            case "errorStrings":
                                                                Swal.fire({
                                                                    icon: "error",
                                                                    title: "Oops...",
                                                                    text: "Ingresaste algún valor incoherente!",
                                                                });
                                                                break;
                                                            case "ErrorReposicionPermitida":
                                                                Swal.fire({
                                                                    icon: "error",
                                                                    title: "Oops...",
                                                                    text: "Debes realizar el pedido de reposición con por lo menos 7 días de anticipación!",
                                                                });
                                                                break;
                                                            case "ErrorVacio":
                                                                Swal.fire({
                                                                    icon: "error",
                                                                    title: "Oops...",
                                                                    text: "Ocurrio un error inesperado!",
                                                                });
                                                                break;
                                                        }

                                                    }
                                                })

                                            }
                                        }
                                        auxiliar();
                                    }else{
                                        Swal.fire({
                                            icon: "error",
                                            iconColor: 'brown',
                                            text: "No se puede realizar un pedido de reposición con más de 10 productos",
                                            confirmButtonColor: "#dd986a"
                                        });
                                    }
                                }
                            }
                        })
                    </script>
                </div>

                <!-- /product list -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-top">
                            <div class="search-set">
                                <div class="search-path">
                                    <a class="btn btn-filter" id="filter_search">
                                        <img src="/assets_superAdmin/img/icons/filter.svg" alt="img">
                                        <span><img src="/assets_superAdmin/img/icons/closes.svg" alt="img"></span>
                                    </a>
                                </div>
                                <div class="search-input"  >
                                    <a class="btn btn-searchset" placeholder="buscar..." ><img src="/assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
                                </div>
                            </div>
                            <div class="wordset">
                                <ul>
                                    <li>
                                        <a data-bs-toggle="tooltip" data-bs-placement="top" title="csv"><img src="/assets_superAdmin/img/icons/excel.svg" alt="img"></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- /Filter -->
                        <div class="card mb-0" id="filter_inputs">
                            <div class="card-body pb-0">
                                <div class="row">
                                    <div class="col-lg-12 col-sm-12">

                                        <form id="Hola" th:action="@{'/adminSede/generarReposicionBusca'}"  method="post" >
                                            <div class="row">
                                                <div class="col-lg col-sm-6 col-12">
                                                    <div class="form-group">
                                                        <select class="select" id="categoria" name="categoria">
                                                            <option>Elegir por tipo </option>
                                                            <option value="Dolor" >Dolor</option>
                                                            <option value="Alergia" >Alergia</option>
                                                            <option value="Suplemento" >Suplemento</option>
                                                            <option value="Belleza" >Belleza</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-lg col-sm-6 col-12">
                                                    <div class="form-group">
                                                        <input id="nombre" name="nombre" type="text" placeholder="nombre del medicamento" >
                                                    </div>
                                                </div>
                                                <div class="col-lg-1 col-sm-6 col-12">
                                                    <div class="form-group">
                                                        <button id="buscar" type="submit" class="btn btn-filters ms-auto"><img src="/assets_superAdmin/img/icons/search-whites.svg" alt="img"></button>
                                                    </div>
                                                </div>
                                            </div>

                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <form id="MyForm">
                            <!-- /Filter -->
                            <div class="table-responsive">
                                <table class="table  datanew">
                                    <thead>
                                    <tr>
                                        <th>Cantidad a solicitar</th>
                                        <th>Medicamentos</th>
                                        <th>Foto</th>
                                        <th>Tipo</th>
                                        <th>Cantidad actual </th>
                                        <th>Precio unitario</th>
                                    </tr>
                                    </thead>
                                    <tbody >
                                    <tr th:each="medicamento, vEstado: ${listaMedicamentosBS}">
                                        <td> <input th:id="|${medicamento.idMedicine}|" type="number" value="0" > </td>
                                        <td th:text="${medicamento.getNombreMedicamento()}"></td>
                                        <td class="productimgname" style="text-align: center;">
                                            <a th:id="|A${medicamento.idMedicine}|" class="product-img" >
                                                <img  th:src="@{'/assets_superAdmin/ImagenesMedicina/' + ${medicamento.getPhoto()}}" alt="product">
                                            </a>
                                        </td>
                                        <td th:text="${medicamento.getCategoria()}"></td>
                                        <td th:text="${medicamento.getCantidad()}"  th:if="${medicamento.getCantidad()}!=0"></td>
                                        <td th:text="|Agotado|"  th:if="${medicamento.getCantidad()}==0"></td>
                                        <td th:text="${medicamento.getPrecio()}"></td>
                                        <script th:inline="javascript" >

                                            $("#A" + [[${medicamento.idMedicine}]]).click(function () {
                                                Swal.fire({
                                                    title: [[${medicamento.getNombreMedicamento()}]],
                                                    text: [[${medicamento.getDescription()}]],
                                                    imageUrl: '/assets_superAdmin/ImagenesMedicina/'+[[${medicamento.getPhoto()}]],
                                                    imageWidth: 400,
                                                    imageHeight: 200,
                                                    imageAlt: "Custom image",
                                                    confirmButtonColor: "#dd986a"
                                                })
                                            })
                                        </script>
                                    </tr>
                                    <!--
                                    th:src="@{'/assets_superAdmin/ImagenesMedicina/' + ${medicamento.getPhoto()}}"
                                    <!td>
                                        <a class="me-3" href="editproduct.html">
                                            <img src="assets/img/icons/edit.svg" alt="img">
                                        </a>
                                    <!/td>
                                    -->
                                    </tbody>
                                </table>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
</div>
<div class="modal fade" id="calculator" tabindex="-1"   aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >Define Quantity</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="calculator-set">
                    <div class="calculatortotal">
                        <h4>0</h4>
                    </div>
                    <ul>
                        <li>
                            <a href="javascript:void(0);">1</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">2</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">3</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">4</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">5</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">6</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">7</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">8</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">9</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="btn btn-closes"><img src="/assets_superAdmin/img/icons/close-circle.svg" alt="img"></a>
                        </li>
                        <li>
                            <a href="javascript:void(0);">0</a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="btn btn-reverse"><img src="/assets_superAdmin/img/icons/reverse.svg" alt="img"></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="holdsales" tabindex="-1"    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >Hold order</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="hold-order">
                    <h2>4500.00</h2>
                </div>
                <div class="form-group">
                    <label>Order Reference</label>
                    <input type="text">
                </div>
                <div class="para-set">
                    <p>The current order will be set on hold. You can retreive this order from the pending order button. Providing a reference to it might help you to identify the order more quickly.</p>
                </div>
                <div class="col-lg-12">
                    <a class="btn btn-submit me-2">Submit</a>
                    <a class="btn btn-cancel" data-bs-dismiss="modal">Cancel</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="edit" tabindex="-1"    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >Edit Order</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Product Price</label>
                            <input type="text" value="20">
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Product Price</label>
                            <select class="select">
                                <option>Exclusive</option>
                                <option>Inclusive</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label> Tax</label>
                            <div class="input-group">
                                <input type="text">
                                <a class="scanner-set input-group-text">
                                    %
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Discount Type</label>
                            <select class="select">
                                <option>Fixed</option>
                                <option>Percentage</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Discount</label>
                            <input type="text" value="20">
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Sales Unit</label>
                            <select class="select">
                                <option>Kilogram</option>
                                <option>Grams</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <a class="btn btn-submit me-2">Submit</a>
                    <a class="btn btn-cancel" data-bs-dismiss="modal">Cancel</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="create" tabindex="-1" aria-labelledby="create"  aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >Ingresar cliente</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-6 col-sm-12 col-12">
                                <div class="form-group">
                                    <label>DNI</label>
                                    <input id="dni" name="dni" type="text">
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-6 col-12">
                                <div class="form-group">
                                    <label for="doctor">Doctor</label>
                                    <select name="idDoctor" id="doctor">
                                        <option th:each="doctor :${listaDoctores}"
                                                th:value="${doctor.getIdDoctor()}"
                                                th:text="${doctor.getName()}+' '+${doctor.getLastName()}">
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <button th:id="aux" type="button" class="btn btn-submit me-2" >Ingresar</button>
                    <script>
                        document.getElementById("aux").onclick = function() {
                            data = {
                                dni :  document.getElementById("dni").value , doctor:document.getElementById("doctor").value
                            }
                            console.log(data);
                            $.ajax({
                                url: "/pharmacist/confirmarDatosPaciente",
                                type: "POST",
                                data: data,
                                success: function(response){
                                    console.log(response);
                                    var aux ;
                                    response.forEach(function (error) {
                                        aux = JSON.parse(error);
                                    });
                                    console.log("Me respondieon");
                                    switch(aux.error){
                                        case "":
                                            window.location.href = "/pharmacist/posFarmacista";
                                            //Recarga
                                            break;
                                        case "noEncontro":
                                            Swal.fire({
                                                colorIcon:'#805409'  ,
                                                showCancelButton: true,
                                                confirmButtonText: 'Ok',
                                                cancelButtonText: 'Cancelar',
                                                confirmButtonColor: '#d48e15',
                                                cancelButtonColor: '#805409',
                                                icon: "error",
                                                iconColor: '#805409',
                                                title: "Oops...",
                                                text: "No se encontró ningún paciente con ese número de dni",
                                            });
                                            break;
                                        case "casteo":
                                            Swal.fire({
                                                colorIcon:'#805409'  ,
                                                showCancelButton: true,
                                                confirmButtonText: 'Ok',
                                                confirmButtonColor: '#d48e15',
                                                icon: "error",
                                                iconColor: '#805409',
                                                title: "Oops...",
                                                text: "Se ingreso un número incoherente",
                                            });
                                            break;
                                    }
                                }
                            })
                        }
                    </script>
                    <a class="btn btn-cancel" data-bs-dismiss="modal">Cancelar</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="pre-orden" tabindex="-1" aria-labelledby="pre-orden"  aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >Pre-Orden</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Nombre</label>
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Apellido</label>
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Edad</label>
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Seguro</label>
                            <input type="text">
                        </div>
                    </div>

                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Doctor</label>
                            <input type="text" >
                        </div>
                    </div>

                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Medicamento</label>
                            <input type="text" >
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Cantidad</label>
                            <input type="text" >
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12 col-12">
                        <div class="form-group">
                            <label>Dirección</label>
                            <input type="text" >
                        </div>
                    </div>

                </div>
                <div class="col-lg-12">
                    <a class="btn btn-submit me-2">Generar</a>
                    <a class="btn btn-cancel" data-bs-dismiss="modal">Cancelar</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="delete" tabindex="-1"    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >Order Deletion</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="delete-order">
                    <img src="/assets_superAdmin/img/icons/close-circle1.svg" alt="img">
                </div>
                <div class="para-set text-center">
                    <p>The current order will be deleted as no payment has been <br> made so far.</p>
                </div>
                <div class="col-lg-12 text-center">
                    <a class="btn btn-danger me-2">Yes</a>
                    <a class="btn btn-cancel" data-bs-dismiss="modal">No</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="recents" tabindex="-1"    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >Recent Transactions</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="tabs-sets">
                    <ul class="nav nav-tabs" id="myTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="purchase-tab" data-bs-toggle="tab" data-bs-target="#purchase" type="button"   aria-controls="purchase" aria-selected="true" role="tab">Purchase</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="payment-tab" data-bs-toggle="tab" data-bs-target="#payment" type="button"   aria-controls="payment" aria-selected="false" role="tab">Payment</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="return-tab" data-bs-toggle="tab" data-bs-target="#return" type="button"   aria-controls="return" aria-selected="false" role="tab">Return</button>
                        </li>
                    </ul>
                    <div class="tab-content" >
                        <div class="tab-pane fade show active" id="purchase" role="tabpanel" aria-labelledby="purchase-tab">
                            <div class="table-top">
                                <div class="search-set">
                                    <div class="search-input">
                                        <a class="btn btn-searchset"><img src="/assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
                                    </div>
                                </div>
                                <div class="wordset">
                                    <ul>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="pdf"><img src="/assets_superAdmin/img/icons/pdf.svg" alt="img"></a>
                                        </li>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="excel"><img src="/assets_superAdmin/img/icons/excel.svg" alt="img"></a>
                                        </li>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="print"><img src="/assets_superAdmin/img/icons/printer.svg" alt="img"></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table datanew">
                                    <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Reference</th>
                                        <th>Customer</th>
                                        <th>Amount	</th>
                                        <th class="text-end">Action</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>INV/SL0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>INV/SL0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>INV/SL0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>INV/SL0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>INV/SL0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>INV/SL0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>INV/SL0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="payment" role="tabpanel" >
                            <div class="table-top">
                                <div class="search-set">
                                    <div class="search-input">
                                        <a class="btn btn-searchset"><img src="/assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
                                    </div>
                                </div>
                                <div class="wordset">
                                    <ul>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="pdf"><img src="/assets_superAdmin/img/icons/pdf.svg" alt="img"></a>
                                        </li>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="excel"><img src="/assets_superAdmin/img/icons/excel.svg" alt="img"></a>
                                        </li>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="print"><img src="/assets_superAdmin/img/icons/printer.svg" alt="img"></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table datanew">
                                    <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Reference</th>
                                        <th>Customer</th>
                                        <th>Amount	</th>
                                        <th class="text-end">Action</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0102</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0103</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0104</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0105</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0106</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0107</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="return" role="tabpanel" >
                            <div class="table-top">
                                <div class="search-set">
                                    <div class="search-input">
                                        <a class="btn btn-searchset"><img src="/assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
                                    </div>
                                </div>
                                <div class="wordset">
                                    <ul>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="pdf"><img src="/assets_superAdmin/img/icons/pdf.svg" alt="img"></a>
                                        </li>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="excel"><img src="/assets_superAdmin/img/icons/excel.svg" alt="img"></a>
                                        </li>
                                        <li>
                                            <a data-bs-toggle="tooltip" data-bs-placement="top" title="print"><img src="/assets_superAdmin/img/icons/printer.svg" alt="img"></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table datanew">
                                    <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Reference</th>
                                        <th>Customer</th>
                                        <th>Amount	</th>
                                        <th class="text-end">Action</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0101</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0102</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0103</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0104</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0105</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0106</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2022-03-07	</td>
                                        <td>0107</td>
                                        <td>Walk-in Customer</td>
                                        <td>$ 1500.00</td>
                                        <td>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
                                            </a>
                                            <a class="me-3" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
                                            </a>
                                            <a class="me-3 confirm-text" href="javascript:void(0);">
                                                <img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
                                            </a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('click', (event) => {
        if (event.target.classList.contains('menos')) {
            const quantityField = event.target.nextElementSibling;
            let currentQuantity = parseInt(quantityField.value);
            if (currentQuantity > 1) {
                quantityField.value = currentQuantity - 1;
            }
            const idMedicine=  parseInt((quantityField.id).substring(3));
            const newCantidad = quantityField.value;

            $.ajax({
                url: '/pharmacist/updateCantidad?'+ "idProduct=" + idMedicine+"&newCantidad="+newCantidad,
                type: 'GET',
                success: function (response) {
                    $.ajax({
                        url: '/pharmacist/getAllCarrito',
                        type: 'GET',
                        success: function (response) {
                            var listaMedicamentos = response;
                            let total = 0 ;
                            listaMedicamentos.forEach(function(medicamento) {
                                total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
                            });
                            var miDiv = document.getElementById('total');
                            miDiv.textContent = 'S/.' + total.toFixed(2);
                            var miDivTwo = document.getElementById('totalProductojpg');
                            miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

                            //totalProductojpg
                            //productset
                            //"${medicamento.getIdMedicine()}"
                        },
                        error: function (error) {
                            console.error('There was a problem with the request:', error);
                        }
                    });
                },
                error: function (error) {
                    console.error('There was a problem with the request:', error);
                }
            });
        } else if (event.target.classList.contains('mas')) {
            const quantityField = event.target.previousElementSibling;
            let currentQuantity = parseInt(quantityField.value);
            quantityField.value = currentQuantity + 1;
            const idMedicine=  parseInt((quantityField.id).substring(3));
            const newCantidad = quantityField.value;

            $.ajax({
                url: '/pharmacist/updateCantidad?'+ "idProduct=" + idMedicine+"&newCantidad="+newCantidad,
                type: 'GET',
                success: function (response) {
                    $.ajax({
                        url: '/pharmacist/getAllCarrito',
                        type: 'GET',
                        success: function (response) {
                            var listaMedicamentos = response;
                            let total = 0 ;
                            listaMedicamentos.forEach(function(medicamento) {
                                total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
                            });
                            var miDiv = document.getElementById('total');
                            miDiv.textContent = 'S/.' + total.toFixed(2);
                            var miDivTwo = document.getElementById('totalProductojpg');
                            miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

                            //totalProductojpg
                            //productset
                            //"${medicamento.getIdMedicine()}"
                        },
                        error: function (error) {
                            console.error('There was a problem with the request:', error);
                        }
                    });
                },
                error: function (error) {
                    console.error('There was a problem with the request:', error);
                }
            });

        }
    });
</script>

<!-- jQuery -->
<script src="/assets_superAdmin/js/jquery-3.6.0.min.js"></script>

<!-- Feather Icon JS -->
<script src="/assets_superAdmin/js/feather.min.js"></script>

<!-- Slimscroll JS -->
<script src="/assets_superAdmin/js/jquery.slimscroll.min.js"></script>

<!-- Bootstrap Core JS -->
<script src="/assets_superAdmin/js/bootstrap.bundle.min.js"></script>

<!-- Datatable JS -->
<script src="/assets_superAdmin/js/jquery.dataTables.min.js"></script>
<script src="/assets_superAdmin/js/dataTables.bootstrap4.min.js"></script>

<!-- Select2 JS -->
<script src="/assets_superAdmin/plugins/select2/js/select2.min.js"></script>

<!-- Owl JS -->
<script src="/assets_superAdmin/plugins/owlcarousel/owl.carousel.min.js"></script>

<!-- Sweetalert 2 -->
<script src="/assets_superAdmin/plugins/sweetalert/sweetalert2.all.min.js"></script>
<script src="/assets_superAdmin/plugins/sweetalert/sweetalerts.min.js"></script>

<!-- Custom JS -->
<script src="/assets_superAdmin/js/script.js"></script>

</body>
</html>