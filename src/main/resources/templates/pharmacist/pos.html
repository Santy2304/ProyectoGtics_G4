<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
	<meta name="description" content="POS - Bootstrap Admin Template">
	<meta name="keywords" content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects">
	<meta name="author" content="Dreamguys - Bootstrap Admin Template">
	<meta name="robots" content="noindex, nofollow">
	<title>Saint Medic</title>

	<!-- Favicon -->
	<link rel="shortcut icon" type="image/x-icon" href="/assets_superAdmin/img/PastillaSinFondo.png">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="/assets_superAdmin/css/bootstrap.min.css">

	<!-- animation CSS -->
	<link rel="stylesheet" href="/assets_superAdmin/css/animate.css">

	<!-- Owl Carousel CSS -->
	<link rel="stylesheet" href="/assets_superAdmin/plugins/owlcarousel/owl.carousel.min.css">
	<link rel="stylesheet" href="/assets_superAdmin/plugins/owlcarousel/owl.theme.default.min.css">

	<!-- Select2 CSS -->
	<link rel="stylesheet" href="/assets_superAdmin/plugins/select2/css/select2.min.css">

	<!-- Datetimepicker CSS -->
	<link rel="stylesheet" href="/assets_superAdmin/css/bootstrap-datetimepicker.min.css">


	<!-- Fontawesome CSS -->
	<link rel="stylesheet" href="/assets_superAdmin/plugins/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="/assets_superAdmin/plugins/fontawesome/css/all.min.css">

	<!-- Main CSS -->
	<link rel="stylesheet" href="/assets_superAdmin/css/style.css">


</head>
<body >

<div id="global-loader" >
	<div class="whirly-loader"> </div>
</div>

<div class="main-wrappers">
	<div th:replace="headerFarmacista"></div>

	<!--sideBar-->
	<div th:replace="sidebarFarmacista:: sidebarFarmacista(activeTab = 'pos')"> </div>

	<!-- /Sidebar -->

		<script>

				document.addEventListener('DOMContentLoaded', () => {
					$.ajax({
						url: '/pharmacist/getAllCarrito',
						type: 'GET',
						success: function (response) {
							let listaMedicamentos = response;
							// Realiza acciones con los datos, como mostrarlos en la consola
							console.log('Lista de medicamentos:', listaMedicamentos);
							// También puedes realizar otras acciones, como actualizar la interfaz de usuario
							// Por ejemplo, si quieres mostrar los medicamentos en una lista HTML:
							let total = 0;
							listaMedicamentos.forEach(function (medicamento) {
								total = total + (medicamento.idMedicine.price) * (medicamento.cantidad);
								let imagen = document.getElementById('active' + medicamento.idMedicine.idMedicine);
								imagen.classList.add('active');
							});
							let miDiv = document.getElementById('total');
							miDiv.textContent = 'S/.' + total.toFixed(2);
							//productset
							//"${medicamento.getIdMedicine()}"
						},
						error: function (error) {
							console.error('There was a problem with the request:', error);
						}
					});
				});




	</script>



	<div class="page-wrapper">
		<div class="content">
			<div class="row">
				<div class="col-lg-8 col-sm-12 tabs_wrapper" >
					<div class="page-header " >
						<div class="page-title">
							<h1>NUEVA VENTA PRESENCIAL</h1>
							<h6>Escoge los productos que vas a vender.</h6>
						</div>
						<div class="page-btn">
							<a  class="btn btn-adds btn-xs" data-bs-toggle="modal" data-bs-target="#pre-orden" style="font-size: 17px"><i class="fa fa-plus me-2"></i>Pre-Orden</a>
						</div>

					</div>

					<style>
						/* Estilos para el botón */
						.custom-button {
							background-color: #e88710; /* Color de fondo */
							color: white; /* Color del texto */
							border: none; /* Borde */
							border-radius: 5px; /* Borde redondeado */
							cursor: pointer; /* Cambia el cursor al pasar por encima */
						}

						/* Estilos para el botón al pasar el cursor por encima */
						.custom-button:hover {
							background-color: #FFFFFF; /* Color de fondo al pasar el cursor por encima */
						}
					</style>

					<div class="top-nav-search" style="width: 100%; margin:-1px">
						<form id="miFormulario" method="post" th:action="@{/pharmacist/filtradoPost}">
							<div class="searchinputs">
								<input id="medicamento" name="medicamento" type="text" placeholder="Buscalos aquí..." style="width: 80%;" required>
								<button type="submit" class="custom-button" ><img src="/assets_superAdmin/img/icons/search.svg" alt="img"></button>
							</div>
						</form>
					</div>
					<ul class=" tabs owl-carousel owl-theme owl-product  border-0 " >
						<li class="active" id="Alergia">
							<div class="product-details " >
								<img src="/assets_superAdmin/img/alergico.png" alt="img" >
								<h6>Alergia</h6>
							</div>
						</li>
						<li id="dolor">
							<div class="product-details " >
								<img src="/assets_superAdmin/img/dolor.png" alt="img" width="10" height="10" >
								<h6>Dolor</h6>
							</div>
						</li>
						<li id="suplemento">
							<div class="product-details">
								<img src="/assets_superAdmin/img/suplemento.png" alt="img">
								<h6>Suplemento</h6>
							</div>
						</li>
						<li id="belleza">
							<a class="product-details">
								<img src="/assets_superAdmin/img/belleza.png" alt="img">
								<h6>Belleza</h6>
							</a>
						</li>
						<li id="otros">
							<a class="product-details">
								<img src="/assets_superAdmin/img/otros.png" alt="img">
								<h6>Otros</h6>
							</a>
						</li>
					</ul>

					<div class="tabs_container" >
						<div class="tab_content active" data-tab="Alergia">
							<div th:with="alergiaPresente=false"></div>
							<!-- Iniciar la fila -->
							<div class="row">
								<div th:id="${medicamento.getIdMedicine()}" class="col-lg-4 col-md-4 col-sm-6" th:each="medicamento, ola : ${listamedicamentosfarm}" th:if=" ${medicamento.getCategoria() == 'Alergias' && medicamento.getCantidad() > 0 }">
									<div th:with="alergiaPresente=true"></div>
									<div th:id="|active${medicamento.getIdMedicine()}|" class="productset">
										<div class="productsetimg">
											<img   th:src="@{'/imagenes/' + ${medicamento.getPhoto()}}" alt="img">
											<h6 th:text="|Cantidad:${medicamento.getCantidad()}|"></h6>
											<div class="check-product">
												<i class="fa fa-check"></i>
											</div>
										</div>
										<div class="productsetcontent">
											<h5 th:text="${medicamento.getCategoria()}" ></h5>
											<h4 th:text="${medicamento.getNombreMedicamento()}"></h4>
											<h6 th:text="|S/${medicamento.getPrecio()}0|"></h6>
										</div>
									</div>
									<script th:inline="javascript" >
										document.addEventListener('DOMContentLoaded', () => {
											let addProduct = document.getElementById(""+ [[${medicamento.getIdMedicine()}]]);
											let productList  = document.getElementById('productList');
											addProduct.addEventListener('click', (event) => {
												console.log("Holaaaaa")
												let adder = document.createElement('ul');
												adder.id = "aux" + [[${medicamento.getNombreMedicamento()}]];
												adder.className = "product-lists";
												let li = document.createElement('li');
												let productImgDiv = document.createElement('div');
												productImgDiv.className = 'productimg';
												let productImgsDiv = document.createElement('div');
												productImgsDiv.className = 'productimgs';
												let img = document.createElement('img');
												img.src = '/imagenes/' + [[${medicamento.photo}]];
												img.alt = 'img';
												productImgsDiv.appendChild(img);
												let productContentDiv = document.createElement('div');
												productContentDiv.className = 'productcontet';
												let h4 = document.createElement('h4');
												h4.textContent = "" + [[${medicamento.getNombreMedicamento()}]];
												let a = document.createElement('a');
												a.href = 'javascript:void(0);';
												a.className = 'ms-2';
												a.setAttribute('data-bs-toggle', 'modal');
												a.setAttribute('data-bs-target', '#edit');
												let editImg = document.createElement('img');
												editImg.src = '/assets_superAdmin/img/icons/edit-5.svg';
												editImg.alt = 'img';
												a.appendChild(editImg);
												h4.appendChild(a);
												let productLinkSetDiv = document.createElement('div');
												productLinkSetDiv.className = 'productlinkset';
												let h5 = document.createElement('h5');
												h5.textContent = "" + [[${medicamento.getCategoria()}]];
												productLinkSetDiv.appendChild(h5);
												let incrementDecrementDiv = document.createElement('div');
												incrementDecrementDiv.className = 'increment-decrement';
												let inputGroupsDiv = document.createElement('div');
												inputGroupsDiv.className = 'input-groups';
												let inputMinus = document.createElement('input');
												inputMinus.type = 'button';
												inputMinus.name = 'menos';
												inputMinus.value = '-';
												inputMinus.className = 'menos button';
												let inputQuantity = document.createElement('input');
												inputQuantity.id = 'awa' + [[${medicamento.getIdMedicine()}]];
												inputQuantity.type = 'text';
												inputQuantity.name = "" + [[${medicamento.getIdMedicine()}]];
												inputQuantity.value = "1";
												inputQuantity.className = 'quantity-field';
												let inputPlus = document.createElement('input');
												inputPlus.type = 'button';
												inputPlus.name = 'mas';
												inputPlus.value = '+';
												inputPlus.className = 'mas button';
												inputGroupsDiv.appendChild(inputMinus);
												inputGroupsDiv.appendChild(inputQuantity);
												inputGroupsDiv.appendChild(inputPlus);
												incrementDecrementDiv.appendChild(inputGroupsDiv);
												// Añadir todo al div principal
												productContentDiv.appendChild(h4);
												productContentDiv.appendChild(productLinkSetDiv);
												productContentDiv.appendChild(incrementDecrementDiv);
												productImgDiv.appendChild(productImgsDiv);
												productImgDiv.appendChild(productContentDiv);
												li.appendChild(productImgDiv);
												// Añadir el precio
												let priceLi = document.createElement('li');
												priceLi.textContent = Number([[${medicamento.getPrecio()}]]).toFixed(2);
												// Añadir botón de eliminar
												let deleteLi = document.createElement('li');
												let deleteA = document.createElement('a');
												deleteA.id = 'delete' + [[${medicamento.getIdMedicine()}]];
												let deleteImg = document.createElement('img');
												deleteImg.src = '/assets_superAdmin/img/icons/delete-2.svg';
												deleteImg.alt = 'img';
												deleteA.appendChild(deleteImg);
												deleteLi.appendChild(deleteA);
												console.log(li);
												console.log(priceLi);
												console.log(deleteLi);
												let structure2  = document.getElementById("active" + [[${medicamento.getIdMedicine()}]]);
												let ola = false;
												if(structure2.classList.contains('active')){
													ola = true;
												}
												if (!ola) {
													$.ajax({
														url: '/pharmacist/addCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															let productList2 = document.getElementById('productList');
															adder.appendChild(li);
															adder.appendChild(priceLi);
															adder.appendChild(deleteLi);
															console.log(adder)
															productList2.appendChild(adder);
															let addProduct = document.getElementById("delete" + [[${medicamento.getIdMedicine()}]]);
															productList = document.getElementById('product-list');
															addProduct.addEventListener('click', (event) => {

																$.ajax({
																	url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
																	type: 'GET',
																	success: function (response) {
																		// Eliminar porción de HTML
																		$.ajax({
																			url: '/pharmacist/getAllCarrito',
																			type: 'GET',
																			success: function (response) {
																				let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
																				let listaMedicamentos = response;
																				let total = 0;
																				listaMedicamentos.forEach(function (medicamento) {
																					total = total + (medicamento.idMedicine.price) * (medicamento.cantidad);
																				});
																				let miDiv = document.getElementById('total');
																				miDiv.textContent = 'S/.' + total.toFixed(2);
																				let miDivTwo = document.getElementById('totalProductojpg');
																				miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																				let activo = document.getElementById('active' + [[${medicamento.getIdMedicine()}]])
																				activo.classList.remove('active');
																				elemento.remove();
																			},
																			error: function (error) {
																				console.error('There was a problem with the request:', error);
																			}
																		});
																	},
																	error: function (error) {
																		console.error('There was a problem with the request:', error);
																	}
																});





															});

															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

																	//totalProductojpg
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}else{
													$.ajax({
														url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															//Eliminar porcion de HTML
															let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
															elemento.remove();
															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}
											});
										});
									</script>

									<!-- Cerrar la fila y abrir una nueva cada tres elementos tengo sueño jefe -->
									<div th:if="${ola.index % 3 == 2}" class="w-100 d-none d-lg-block"></div>
								</div>
							</div>
						</div>

						<div class="tab_content" data-tab="dolor">
							<div th:with="dolorPresente=false"></div>
							<!-- Iniciar la fila -->
							<div class="row">
								<div th:id="${medicamento.getIdMedicine()}" class="col-lg-4 col-md-4 col-sm-6" th:each="medicamento, ola : ${listamedicamentosfarm}" th:if=" ${medicamento.getCategoria() == 'Dolor'  && medicamento.getCantidad() > 0 }">
									<div th:with="dolorPresente=true"></div>
									<div th:id="|active${medicamento.getIdMedicine()}|" class="productset">
										<div class="productsetimg">
											<img   th:src="@{'/imagenes/' + ${medicamento.getPhoto()}}" alt="img">
											<h6 th:text="|Cantidad:${medicamento.getCantidad()}|"></h6>
											<div class="check-product">
												<i class="fa fa-check"></i>
											</div>
										</div>
										<div class="productsetcontent">
											<h5 th:text="${medicamento.getCategoria()}" ></h5>
											<h4 th:text="${medicamento.getNombreMedicamento()}"></h4>
											<h6 th:text="|S/${medicamento.getPrecio()}0|"></h6>
										</div>
									</div>
									<script th:inline="javascript" >
										document.addEventListener('DOMContentLoaded', () => {
											let addProduct = document.getElementById(""+ [[${medicamento.getIdMedicine()}]]);
											let productList  = document.getElementById('productList');
											addProduct.addEventListener('click', (event) => {
												console.log("Holaaaaa")
												let adder = document.createElement('ul');
												adder.id = "aux" + [[${medicamento.getNombreMedicamento()}]];
												adder.className = "product-lists";
												let li = document.createElement('li');
												let productImgDiv = document.createElement('div');
												productImgDiv.className = 'productimg';
												let productImgsDiv = document.createElement('div');
												productImgsDiv.className = 'productimgs';
												let img = document.createElement('img');
												img.src = '/imagenes/' + [[${medicamento.photo}]];
												img.alt = 'img';
												productImgsDiv.appendChild(img);
												let productContentDiv = document.createElement('div');
												productContentDiv.className = 'productcontet';
												let h4 = document.createElement('h4');
												h4.textContent = "" + [[${medicamento.getNombreMedicamento()}]];
												let a = document.createElement('a');
												a.href = 'javascript:void(0);';
												a.className = 'ms-2';
												a.setAttribute('data-bs-toggle', 'modal');
												a.setAttribute('data-bs-target', '#edit');
												let editImg = document.createElement('img');
												editImg.src = '/assets_superAdmin/img/icons/edit-5.svg';
												editImg.alt = 'img';
												a.appendChild(editImg);
												h4.appendChild(a);
												let productLinkSetDiv = document.createElement('div');
												productLinkSetDiv.className = 'productlinkset';
												let h5 = document.createElement('h5');
												h5.textContent = "" + [[${medicamento.getCategoria()}]];
												productLinkSetDiv.appendChild(h5);
												let incrementDecrementDiv = document.createElement('div');
												incrementDecrementDiv.className = 'increment-decrement';
												let inputGroupsDiv = document.createElement('div');
												inputGroupsDiv.className = 'input-groups';
												let inputMinus = document.createElement('input');
												inputMinus.type = 'button';
												inputMinus.name = 'menos';
												inputMinus.value = '-';
												inputMinus.className = 'menos button';
												let inputQuantity = document.createElement('input');
												inputQuantity.id = 'awa' + [[${medicamento.getIdMedicine()}]];
												inputQuantity.type = 'text';
												inputQuantity.name = "" + [[${medicamento.getIdMedicine()}]];
												inputQuantity.value = "1";
												inputQuantity.className = 'quantity-field';
												let inputPlus = document.createElement('input');
												inputPlus.type = 'button';
												inputPlus.name = 'mas';
												inputPlus.value = '+';
												inputPlus.className = 'mas button';
												inputGroupsDiv.appendChild(inputMinus);
												inputGroupsDiv.appendChild(inputQuantity);
												inputGroupsDiv.appendChild(inputPlus);
												incrementDecrementDiv.appendChild(inputGroupsDiv);
												// Añadir todo al div principal
												productContentDiv.appendChild(h4);
												productContentDiv.appendChild(productLinkSetDiv);
												productContentDiv.appendChild(incrementDecrementDiv);
												productImgDiv.appendChild(productImgsDiv);
												productImgDiv.appendChild(productContentDiv);
												li.appendChild(productImgDiv);
												// Añadir el precio
												let priceLi = document.createElement('li');
												priceLi.textContent = Number([[${medicamento.getPrecio()}]]).toFixed(2);
												// Añadir botón de eliminar
												let deleteLi = document.createElement('li');
												let deleteA = document.createElement('a');
												deleteA.id = 'delete' + [[${medicamento.getIdMedicine()}]];
												let deleteImg = document.createElement('img');
												deleteImg.src = '/assets_superAdmin/img/icons/delete-2.svg';
												deleteImg.alt = 'img';
												deleteA.appendChild(deleteImg);
												deleteLi.appendChild(deleteA);
												console.log(li);
												console.log(priceLi);
												console.log(deleteLi);
												let structure2  = document.getElementById("active" + [[${medicamento.getIdMedicine()}]]);
												let ola = false;
												if(structure2.classList.contains('active')){
													ola = true;
												}
												if (!ola) {
													$.ajax({
														url: '/pharmacist/addCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															let productList2 = document.getElementById('productList');
															adder.appendChild(li);
															adder.appendChild(priceLi);
															adder.appendChild(deleteLi);
															console.log(adder)
															productList2.appendChild(adder);
															let addProduct = document.getElementById("delete" + [[${medicamento.getIdMedicine()}]]);
															productList = document.getElementById('product-list');
															addProduct.addEventListener('click', (event) => {

																$.ajax({
																	url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
																	type: 'GET',
																	success: function (response) {
																		// Eliminar porción de HTML
																		$.ajax({
																			url: '/pharmacist/getAllCarrito',
																			type: 'GET',
																			success: function (response) {
																				let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
																				let listaMedicamentos = response;
																				let total = 0;
																				listaMedicamentos.forEach(function (medicamento) {
																					total = total + (medicamento.idMedicine.price) * (medicamento.cantidad);
																				});
																				let miDiv = document.getElementById('total');
																				miDiv.textContent = 'S/.' + total.toFixed(2);
																				let miDivTwo = document.getElementById('totalProductojpg');
																				miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																				let activo = document.getElementById('active' + [[${medicamento.getIdMedicine()}]])
																				activo.classList.remove('active');
																				elemento.remove();
																			},
																			error: function (error) {
																				console.error('There was a problem with the request:', error);
																			}
																		});
																	},
																	error: function (error) {
																		console.error('There was a problem with the request:', error);
																	}
																});





															});

															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

																	//totalProductojpg
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}else{
													$.ajax({
														url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															//Eliminar porcion de HTML
															let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
															elemento.remove();
															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}
											});
										});
									</script>

									<!-- Cerrar la fila y abrir una nueva cada tres elementos tengo sueño jefe -->
									<div th:if="${ola.index % 3 == 2}" class="w-100 d-none d-lg-block"></div>
								</div>
							</div>
						</div>

						<div class="tab_content" data-tab="belleza">
							<div th:with="bellezaPresente=false"></div>
							<!-- Iniciar la fila -->
							<div class="row">
								<div th:id="${medicamento.getIdMedicine()}" class="col-lg-4 col-md-4 col-sm-6" th:each="medicamento, ola : ${listamedicamentosfarm}" th:if=" ${medicamento.getCategoria() == 'Belleza'  && medicamento.getCantidad() > 0}">
									<div th:with="bellezaPresente=true"></div>
									<div th:id="|active${medicamento.getIdMedicine()}|" class="productset">
										<div class="productsetimg">
											<img   th:src="@{'/imagenes/' + ${medicamento.getPhoto()}}" alt="img">
											<h6 th:text="|Cantidad:${medicamento.getCantidad()}|"></h6>
											<div class="check-product">
												<i class="fa fa-check"></i>
											</div>
										</div>
										<div class="productsetcontent">
											<h5 th:text="${medicamento.getCategoria()}" ></h5>
											<h4 th:text="${medicamento.getNombreMedicamento()}"></h4>
											<h6 th:text="|S/${medicamento.getPrecio()}0|"></h6>
										</div>
									</div>
									<script th:inline="javascript" >
										document.addEventListener('DOMContentLoaded', () => {
											let addProduct = document.getElementById(""+ [[${medicamento.getIdMedicine()}]]);
											let productList  = document.getElementById('productList');
											addProduct.addEventListener('click', (event) => {
												console.log("Holaaaaa")
												let adder = document.createElement('ul');
												adder.id = "aux" + [[${medicamento.getNombreMedicamento()}]];
												adder.className = "product-lists";
												let li = document.createElement('li');
												let productImgDiv = document.createElement('div');
												productImgDiv.className = 'productimg';
												let productImgsDiv = document.createElement('div');
												productImgsDiv.className = 'productimgs';
												let img = document.createElement('img');
												img.src = '/imagenes/' + [[${medicamento.photo}]];
												img.alt = 'img';
												productImgsDiv.appendChild(img);
												let productContentDiv = document.createElement('div');
												productContentDiv.className = 'productcontet';
												let h4 = document.createElement('h4');
												h4.textContent = "" + [[${medicamento.getNombreMedicamento()}]];
												let a = document.createElement('a');
												a.href = 'javascript:void(0);';
												a.className = 'ms-2';
												a.setAttribute('data-bs-toggle', 'modal');
												a.setAttribute('data-bs-target', '#edit');
												let editImg = document.createElement('img');
												editImg.src = '/assets_superAdmin/img/icons/edit-5.svg';
												editImg.alt = 'img';
												a.appendChild(editImg);
												h4.appendChild(a);
												let productLinkSetDiv = document.createElement('div');
												productLinkSetDiv.className = 'productlinkset';
												let h5 = document.createElement('h5');
												h5.textContent = "" + [[${medicamento.getCategoria()}]];
												productLinkSetDiv.appendChild(h5);
												let incrementDecrementDiv = document.createElement('div');
												incrementDecrementDiv.className = 'increment-decrement';
												let inputGroupsDiv = document.createElement('div');
												inputGroupsDiv.className = 'input-groups';
												let inputMinus = document.createElement('input');
												inputMinus.type = 'button';
												inputMinus.name = 'menos';
												inputMinus.value = '-';
												inputMinus.className = 'menos button';
												let inputQuantity = document.createElement('input');
												inputQuantity.id = 'awa' + [[${medicamento.getIdMedicine()}]];
												inputQuantity.type = 'text';
												inputQuantity.name = "" + [[${medicamento.getIdMedicine()}]];
												inputQuantity.value = "1";
												inputQuantity.className = 'quantity-field';
												let inputPlus = document.createElement('input');
												inputPlus.type = 'button';
												inputPlus.name = 'mas';
												inputPlus.value = '+';
												inputPlus.className = 'mas button';
												inputGroupsDiv.appendChild(inputMinus);
												inputGroupsDiv.appendChild(inputQuantity);
												inputGroupsDiv.appendChild(inputPlus);
												incrementDecrementDiv.appendChild(inputGroupsDiv);
												// Añadir todo al div principal
												productContentDiv.appendChild(h4);
												productContentDiv.appendChild(productLinkSetDiv);
												productContentDiv.appendChild(incrementDecrementDiv);
												productImgDiv.appendChild(productImgsDiv);
												productImgDiv.appendChild(productContentDiv);
												li.appendChild(productImgDiv);
												// Añadir el precio
												let priceLi = document.createElement('li');
												priceLi.textContent = Number([[${medicamento.getPrecio()}]]).toFixed(2);
												// Añadir botón de eliminar
												let deleteLi = document.createElement('li');
												let deleteA = document.createElement('a');
												deleteA.id = 'delete' + [[${medicamento.getIdMedicine()}]];
												let deleteImg = document.createElement('img');
												deleteImg.src = '/assets_superAdmin/img/icons/delete-2.svg';
												deleteImg.alt = 'img';
												deleteA.appendChild(deleteImg);
												deleteLi.appendChild(deleteA);
												console.log(li);
												console.log(priceLi);
												console.log(deleteLi);
												let structure2  = document.getElementById("active" + [[${medicamento.getIdMedicine()}]]);
												let ola = false;
												if(structure2.classList.contains('active')){
													ola = true;
												}
												if (!ola) {
													$.ajax({
														url: '/pharmacist/addCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															let productList2 = document.getElementById('productList');
															adder.appendChild(li);
															adder.appendChild(priceLi);
															adder.appendChild(deleteLi);
															console.log(adder)
															productList2.appendChild(adder);
															let addProduct = document.getElementById("delete" + [[${medicamento.getIdMedicine()}]]);
															productList = document.getElementById('product-list');
															addProduct.addEventListener('click', (event) => {

																$.ajax({
																	url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
																	type: 'GET',
																	success: function (response) {
																		// Eliminar porción de HTML
																		$.ajax({
																			url: '/pharmacist/getAllCarrito',
																			type: 'GET',
																			success: function (response) {
																				let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
																				let listaMedicamentos = response;
																				let total = 0;
																				listaMedicamentos.forEach(function (medicamento) {
																					total = total + (medicamento.idMedicine.price) * (medicamento.cantidad);
																				});
																				let miDiv = document.getElementById('total');
																				miDiv.textContent = 'S/.' + total.toFixed(2);
																				let miDivTwo = document.getElementById('totalProductojpg');
																				miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																				let activo = document.getElementById('active' + [[${medicamento.getIdMedicine()}]])
																				activo.classList.remove('active');
																				elemento.remove();
																			},
																			error: function (error) {
																				console.error('There was a problem with the request:', error);
																			}
																		});
																	},
																	error: function (error) {
																		console.error('There was a problem with the request:', error);
																	}
																});





															});

															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

																	//totalProductojpg
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}else{
													$.ajax({
														url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															//Eliminar porcion de HTML
															let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
															elemento.remove();
															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}
											});
										});
									</script>

									<!-- Cerrar la fila y abrir una nueva cada tres elementos tengo sueño jefe -->
									<div th:if="${ola.index % 3 == 2}" class="w-100 d-none d-lg-block"></div>
								</div>
							</div>
						</div>

						<div class="tab_content" data-tab="suplemento">
							<!-- Variable de control para saber si hay al menos un medicamento de suplemento -->
							<div th:with="suplementoPresente=false"></div>
							<!-- Iniciar la fila -->
							<div class="row">
								<div th:id="${medicamento.getIdMedicine()}" class="col-lg-4 col-md-4 col-sm-6" th:each="medicamento, ola : ${listamedicamentosfarm}" th:if=" ${medicamento.getCategoria() == 'Suplemento'  && medicamento.getCantidad() > 0 }">
									<div th:with="suplementoPresente=true"></div>
									<div th:id="|active${medicamento.getIdMedicine()}|" class="productset">
										<div class="productsetimg">
											<img   th:src="@{'/imagenes/' + ${medicamento.getPhoto()}}" alt="img">
											<h6 th:text="|Cantidad:${medicamento.getCantidad()}|"></h6>
											<div class="check-product">
												<i class="fa fa-check"></i>
											</div>
										</div>
										<div class="productsetcontent">
											<h5 th:text="${medicamento.getCategoria()}" ></h5>
											<h4 th:text="${medicamento.getNombreMedicamento()}"></h4>
											<h6 th:text="|S/${medicamento.getPrecio()}0|"></h6>
										</div>
									</div>
									<script th:inline="javascript" >
										document.addEventListener('DOMContentLoaded', () => {
											let addProduct = document.getElementById(""+ [[${medicamento.getIdMedicine()}]]);
											let productList  = document.getElementById('productList');
											addProduct.addEventListener('click', (event) => {
												console.log("Holaaaaa")
												let adder = document.createElement('ul');
												adder.id = "aux" + [[${medicamento.getNombreMedicamento()}]];
												adder.className = "product-lists";
												let li = document.createElement('li');
												let productImgDiv = document.createElement('div');
												productImgDiv.className = 'productimg';
												let productImgsDiv = document.createElement('div');
												productImgsDiv.className = 'productimgs';
												let img = document.createElement('img');
												img.src = '/imagenes/' + [[${medicamento.photo}]];
												img.alt = 'img';
												productImgsDiv.appendChild(img);
												let productContentDiv = document.createElement('div');
												productContentDiv.className = 'productcontet';
												let h4 = document.createElement('h4');
												h4.textContent = "" + [[${medicamento.getNombreMedicamento()}]];
												let a = document.createElement('a');
												a.href = 'javascript:void(0);';
												a.className = 'ms-2';
												a.setAttribute('data-bs-toggle', 'modal');
												a.setAttribute('data-bs-target', '#edit');
												let editImg = document.createElement('img');
												editImg.src = '/assets_superAdmin/img/icons/edit-5.svg';
												editImg.alt = 'img';
												a.appendChild(editImg);
												h4.appendChild(a);
												let productLinkSetDiv = document.createElement('div');
												productLinkSetDiv.className = 'productlinkset';
												let h5 = document.createElement('h5');
												h5.textContent = "" + [[${medicamento.getCategoria()}]];
												productLinkSetDiv.appendChild(h5);
												let incrementDecrementDiv = document.createElement('div');
												incrementDecrementDiv.className = 'increment-decrement';
												let inputGroupsDiv = document.createElement('div');
												inputGroupsDiv.className = 'input-groups';
												let inputMinus = document.createElement('input');
												inputMinus.type = 'button';
												inputMinus.name = 'menos';
												inputMinus.value = '-';
												inputMinus.className = 'menos button';
												let inputQuantity = document.createElement('input');
												inputQuantity.id = 'awa' + [[${medicamento.getIdMedicine()}]];
												inputQuantity.type = 'text';
												inputQuantity.name = "" + [[${medicamento.getIdMedicine()}]];
												inputQuantity.value = "1";
												inputQuantity.className = 'quantity-field';
												let inputPlus = document.createElement('input');
												inputPlus.type = 'button';
												inputPlus.name = 'mas';
												inputPlus.value = '+';
												inputPlus.className = 'mas button';
												inputGroupsDiv.appendChild(inputMinus);
												inputGroupsDiv.appendChild(inputQuantity);
												inputGroupsDiv.appendChild(inputPlus);
												incrementDecrementDiv.appendChild(inputGroupsDiv);
												// Añadir todo al div principal
												productContentDiv.appendChild(h4);
												productContentDiv.appendChild(productLinkSetDiv);
												productContentDiv.appendChild(incrementDecrementDiv);
												productImgDiv.appendChild(productImgsDiv);
												productImgDiv.appendChild(productContentDiv);
												li.appendChild(productImgDiv);
												// Añadir el precio
												let priceLi = document.createElement('li');
												priceLi.textContent = Number([[${medicamento.getPrecio()}]]).toFixed(2);
												// Añadir botón de eliminar
												let deleteLi = document.createElement('li');
												let deleteA = document.createElement('a');
												deleteA.id = 'delete' + [[${medicamento.getIdMedicine()}]];
												let deleteImg = document.createElement('img');
												deleteImg.src = '/assets_superAdmin/img/icons/delete-2.svg';
												deleteImg.alt = 'img';
												deleteA.appendChild(deleteImg);
												deleteLi.appendChild(deleteA);
												console.log(li);
												console.log(priceLi);
												console.log(deleteLi);
												let structure2  = document.getElementById("active" + [[${medicamento.getIdMedicine()}]]);
												let ola = false;
												if(structure2.classList.contains('active')){
													ola = true;
												}
												if (!ola) {
													$.ajax({
														url: '/pharmacist/addCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															let productList2 = document.getElementById('productList');
															adder.appendChild(li);
															adder.appendChild(priceLi);
															adder.appendChild(deleteLi);
															console.log(adder)
															productList2.appendChild(adder);
															let addProduct = document.getElementById("delete" + [[${medicamento.getIdMedicine()}]]);
															productList = document.getElementById('product-list');
															addProduct.addEventListener('click', (event) => {

																$.ajax({
																	url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
																	type: 'GET',
																	success: function (response) {
																		// Eliminar porción de HTML
																		$.ajax({
																			url: '/pharmacist/getAllCarrito',
																			type: 'GET',
																			success: function (response) {
																				let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
																				let listaMedicamentos = response;
																				let total = 0;
																				listaMedicamentos.forEach(function (medicamento) {
																					total = total + (medicamento.idMedicine.price) * (medicamento.cantidad);
																				});
																				let miDiv = document.getElementById('total');
																				miDiv.textContent = 'S/.' + total.toFixed(2);
																				let miDivTwo = document.getElementById('totalProductojpg');
																				miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																				let activo = document.getElementById('active' + [[${medicamento.getIdMedicine()}]])
																				activo.classList.remove('active');
																				elemento.remove();
																			},
																			error: function (error) {
																				console.error('There was a problem with the request:', error);
																			}
																		});
																	},
																	error: function (error) {
																		console.error('There was a problem with the request:', error);
																	}
																});





															});

															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

																	//totalProductojpg
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}else{
													$.ajax({
														url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															//Eliminar porcion de HTML
															let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
															elemento.remove();
															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}
											});
										});
									</script>

									<!-- Cerrar la fila y abrir una nueva cada tres elementos tengo sueño jefe -->
									<div th:if="${ola.index % 3 == 2}" class="w-100 d-none d-lg-block"></div>
								</div>
							</div>
						</div>

						<div class="tab_content" data-tab="otros">
							<div th:with="otrosPresente=false"></div>
							<!-- Iniciar la fila -->
							<div class="row">
								<div th:id="${medicamento.getIdMedicine()}" class="col-lg-4 col-md-4 col-sm-6" th:each="medicamento, ola : ${listamedicamentosfarm}" th:if=" ${medicamento.getCategoria() == 'Otros'  && medicamento.getCantidad() > 0 }">
									<div th:with="otrosPresente=true"></div>
									<div th:id="|active${medicamento.getIdMedicine()}|" class="productset">
										<div class="productsetimg">
											<img   th:src="@{'/imagenes/' + ${medicamento.getPhoto()}}" alt="img">
											<h6 th:text="|Cantidad:${medicamento.getCantidad()}|"></h6>
											<div class="check-product">
												<i class="fa fa-check"></i>
											</div>
										</div>
										<div class="productsetcontent">
											<h5 th:text="${medicamento.getCategoria()}" ></h5>
											<h4 th:text="${medicamento.getNombreMedicamento()}"></h4>
											<h6 th:text="|S/${medicamento.getPrecio()}0|"></h6>
										</div>
									</div>
									<script th:inline="javascript" >
										document.addEventListener('DOMContentLoaded', () => {
											let addProduct = document.getElementById(""+ [[${medicamento.getIdMedicine()}]]);
											let productList  = document.getElementById('productList');
											addProduct.addEventListener('click', (event) => {
												console.log("Holaaaaa")
												let adder = document.createElement('ul');
												adder.id = "aux" + [[${medicamento.getNombreMedicamento()}]];
												adder.className = "product-lists";
												let li = document.createElement('li');
												let productImgDiv = document.createElement('div');
												productImgDiv.className = 'productimg';
												let productImgsDiv = document.createElement('div');
												productImgsDiv.className = 'productimgs';
												let img = document.createElement('img');
												img.src = '/imagenes/' + [[${medicamento.photo}]];
												img.alt = 'img';
												productImgsDiv.appendChild(img);
												let productContentDiv = document.createElement('div');
												productContentDiv.className = 'productcontet';
												let h4 = document.createElement('h4');
												h4.textContent = "" + [[${medicamento.getNombreMedicamento()}]];
												let a = document.createElement('a');
												a.href = 'javascript:void(0);';
												a.className = 'ms-2';
												a.setAttribute('data-bs-toggle', 'modal');
												a.setAttribute('data-bs-target', '#edit');
												let editImg = document.createElement('img');
												editImg.src = '/assets_superAdmin/img/icons/edit-5.svg';
												editImg.alt = 'img';
												a.appendChild(editImg);
												h4.appendChild(a);
												let productLinkSetDiv = document.createElement('div');
												productLinkSetDiv.className = 'productlinkset';
												let h5 = document.createElement('h5');
												h5.textContent = "" + [[${medicamento.getCategoria()}]];
												productLinkSetDiv.appendChild(h5);
												let incrementDecrementDiv = document.createElement('div');
												incrementDecrementDiv.className = 'increment-decrement';
												let inputGroupsDiv = document.createElement('div');
												inputGroupsDiv.className = 'input-groups';
												let inputMinus = document.createElement('input');
												inputMinus.type = 'button';
												inputMinus.name = 'menos';
												inputMinus.value = '-';
												inputMinus.className = 'menos button';
												let inputQuantity = document.createElement('input');
												inputQuantity.id = 'awa' + [[${medicamento.getIdMedicine()}]];
												inputQuantity.type = 'text';
												inputQuantity.name = "" + [[${medicamento.getIdMedicine()}]];
												inputQuantity.value = "1";
												inputQuantity.className = 'quantity-field';
												let inputPlus = document.createElement('input');
												inputPlus.type = 'button';
												inputPlus.name = 'mas';
												inputPlus.value = '+';
												inputPlus.className = 'mas button';
												inputGroupsDiv.appendChild(inputMinus);
												inputGroupsDiv.appendChild(inputQuantity);
												inputGroupsDiv.appendChild(inputPlus);
												incrementDecrementDiv.appendChild(inputGroupsDiv);
												// Añadir todo al div principal
												productContentDiv.appendChild(h4);
												productContentDiv.appendChild(productLinkSetDiv);
												productContentDiv.appendChild(incrementDecrementDiv);
												productImgDiv.appendChild(productImgsDiv);
												productImgDiv.appendChild(productContentDiv);
												li.appendChild(productImgDiv);
												// Añadir el precio
												let priceLi = document.createElement('li');
												priceLi.textContent = Number([[${medicamento.getPrecio()}]]).toFixed(2);
												// Añadir botón de eliminar
												let deleteLi = document.createElement('li');
												let deleteA = document.createElement('a');
												deleteA.id = 'delete' + [[${medicamento.getIdMedicine()}]];
												let deleteImg = document.createElement('img');
												deleteImg.src = '/assets_superAdmin/img/icons/delete-2.svg';
												deleteImg.alt = 'img';
												deleteA.appendChild(deleteImg);
												deleteLi.appendChild(deleteA);
												console.log(li);
												console.log(priceLi);
												console.log(deleteLi);
												let structure2  = document.getElementById("active" + [[${medicamento.getIdMedicine()}]]);
												let ola = false;
												if(structure2.classList.contains('active')){
													ola = true;
												}
												if (!ola) {
													$.ajax({
														url: '/pharmacist/addCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															let productList2 = document.getElementById('productList');
															adder.appendChild(li);
															adder.appendChild(priceLi);
															adder.appendChild(deleteLi);
															console.log(adder)
															productList2.appendChild(adder);
															let addProduct = document.getElementById("delete" + [[${medicamento.getIdMedicine()}]]);
															productList = document.getElementById('product-list');
															addProduct.addEventListener('click', (event) => {

																$.ajax({
																	url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
																	type: 'GET',
																	success: function (response) {
																		// Eliminar porción de HTML
																		$.ajax({
																			url: '/pharmacist/getAllCarrito',
																			type: 'GET',
																			success: function (response) {
																				let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
																				let listaMedicamentos = response;
																				let total = 0;
																				listaMedicamentos.forEach(function (medicamento) {
																					total = total + (medicamento.idMedicine.price) * (medicamento.cantidad);
																				});
																				let miDiv = document.getElementById('total');
																				miDiv.textContent = 'S/.' + total.toFixed(2);
																				let miDivTwo = document.getElementById('totalProductojpg');
																				miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																				let activo = document.getElementById('active' + [[${medicamento.getIdMedicine()}]])
																				activo.classList.remove('active');
																				elemento.remove();
																			},
																			error: function (error) {
																				console.error('There was a problem with the request:', error);
																			}
																		});
																	},
																	error: function (error) {
																		console.error('There was a problem with the request:', error);
																	}
																});





															});

															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

																	//totalProductojpg
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}else{
													$.ajax({
														url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${medicamento.getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															//Eliminar porcion de HTML
															let elemento = document.getElementById("aux" + [[${medicamento.getNombreMedicamento()}]]);
															elemento.remove();
															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	let total = 0 ;
																	listaMedicamentos.forEach(function(medicamento) {
																		total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
																	});
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let miDivTwo = document.getElementById('totalProductojpg');
																	miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;
																	//productset
																	//"${medicamento.getIdMedicine()}"
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});
														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});
												}
											});
										});
									</script>

									<!-- Cerrar la fila y abrir una nueva cada tres elementos tengo sueño jefe -->
									<div th:if="${ola.index % 3 == 2}" class="w-100 d-none d-lg-block"></div>
								</div>
							</div>
						</div>
					</div>
				</div>




				<div class="col-lg-4 col-sm-12 ">
					<div class="order-list">
						<div class="orderid">
							<h4>Orden de venta</h4>
							<h5 th:if="${fullNamePatient} != null" th:text="|Paciente: ${fullNamePatient}|"></h5>
							<h5 th:if="${fullNameDoctor} != null" th:text="|Doctor: ${fullNameDoctor}|"></h5>
						</div>
						<div th:if="${fullNamePatient} != null" class="actionproducts">
							<ul>
								<li>
									<a  id="borrador" ><img  src="/assets_superAdmin/img/icons/delete-2.svg" alt="img"></a>
									<script>

										document.getElementById("borrador").onclick = function(){
											Swal.fire({ title:'¿Estás seguro de eliminar los datos del cliente?',
												icon: 'warning',
												showCancelButton: true
												, confirmButtonColor: '#d48e15',
												cancelButtonColor: '#805409',
												confirmButtonText: 'Eliminar datos' ,
												cancelButtonText:'Cancelar' }).then((result) => {
												if (result.isConfirmed) {
													// Redirigir a la vista del controlador
													window.location.href = "/pharmacist/eliminarPacienteDoctorDesdeFarmacista";
												}
											});
										}

									</script>
								</li>

							</ul>
						</div>
					</div>
					<div class="card card-order">
						<div th:if="${fullNamePatient} == null" class="card-body">
							<div class="row">
								<div class="col-12">
									<a href="javascript:void(0);" class="btn btn-adds" data-bs-toggle="modal" data-bs-target="#create"><i class="fa fa-plus me-2"></i>Ingresar datos del cliente</a>
								</div>
							</div>
						</div>
						<div class="split-card">
						</div>
						<div class="card-body pt-0">
							<div class="totalitem">
								<h4 id="totalProductojpg" th:text="|Total de productos : ${listaComprar.size()}|"></h4>
								<a href="/pharmacist/vaciarCarrito">Vaciar carrito</a>
							</div>
							<form id="myForm">
								<div id='productList' class="product-table">
									<ul  th:id="|aux${carrito.getIdMedicine().getName()}|" th:each="carrito : ${listaComprar}" class="product-lists">
										<li>
											<div class="productimg">
												<div class="productimgs">
													<img th:src="@{'/imagenes/' + ${carrito.getIdMedicine().getPhoto()}}" alt="img">
												</div>
												<div class="productcontet">
													<h4 th:text="${carrito.getIdMedicine().getName()}">
														<a href="javascript:void(0);" class="ms-2" data-bs-toggle="modal" data-bs-target="#edit"><img src="/assets_superAdmin/img/icons/edit-5.svg" alt="img"></a>
													</h4>
													<div class="productlinkset">
														<h5 th:text="${carrito.getIdMedicine().getCategory()}"></h5>
													</div>
													<div class="increment-decrement">
														<div class="input-groups">
															<input type="button" name="menos" value="-"  class="menos  button">
															<input th:id="|awa${carrito.getIdMedicine().getIdMedicine()}|" type="text" th:name="${carrito.idMedicine.getIdMedicine()}"  th:value="${carrito.getCantidad()}" class="quantity-field">
															<input type="button" name="mas" value="+"  class="mas  button ">
														</div>
													</div>
												</div>
											</div>
										</li>
										<li th:text="${#numbers.formatDecimal(carrito.idMedicine.getPrice(), 2, 2)}"></li>
										<li><a th:id="|delete${carrito.getIdMedicine().getIdMedicine()}|" > <img  src="/assets_superAdmin/img/icons/delete-2.svg" alt="img"> </a></li>
										<script th:inline="javascript" >
											document.addEventListener('DOMContentLoaded', () => {
												let addProduct = document.getElementById("delete"+ [[${carrito.getIdMedicine().getIdMedicine()}]]);
												let productList  = document.getElementById('productList');
												addProduct.addEventListener('click', (event) => {
													$.ajax({
														url: '/pharmacist/deleteProductCarritoVenta?idProducto=' + [[${carrito.getIdMedicine().getIdMedicine()}]],
														type: 'GET',
														success: function (response) {
															//Eliminar porcion de HTML
															let imagen = document.getElementById('active' + [[${carrito.getIdMedicine().getIdMedicine()}]]);
															imagen.classList.remove('active');
															$.ajax({
																url: '/pharmacist/getAllCarrito',
																type: 'GET',
																success: function (response) {
																	let listaMedicamentos = response;
																	// Realiza acciones con los datos, como mostrarlos en la consola
																	console.log('Lista de medicamentos:', listaMedicamentos);
																	// También puedes realizar otras acciones, como actualizar la interfaz de usuario
																	// Por ejemplo, si quieres mostrar los medicamentos en una lista HTML:
																	let total = 0;
																	let miDiv = document.getElementById('total');
																	miDiv.textContent = 'S/.' + total.toFixed(2);
																	let elemento = document.getElementById("aux" + [[${carrito.getIdMedicine().getName()}]]);
																	elemento.remove();
																},
																error: function (error) {
																	console.error('There was a problem with the request:', error);
																}
															});

														},
														error: function (error) {
															console.error('There was a problem with the request:', error);
														}
													});

												})
												});
										</script>
                                    </ul>
								</div>
							</form>
						</div>
						<div class="split-card">
						</div>
						<div class="card-body pt-0 pb-2">
							<div class="setvalue">
								<ul>
									<li class="total-value">
										<h5>Total  </h5>
										<h6 id="total"></h6>
									</li>
								</ul>
							</div>
							<div class="setvaluecash">
								<style>
									.selected {
										background-color: #f0f0f0; /* Cambia el color de fondo cuando está seleccionado */
									}
									</style>
								<ul>
									<li>
										<a class="paymentmethod" >
											<img src="/assets_superAdmin/img/icons/cash.svg" alt="img" class="me-2">
											Efectivo
										</a>
                                        <input type="hidden" name="efectivo" value="efectivo">
									</li>
									<li>
										<a  class="paymentmethod">
											<img src="/assets_superAdmin/img/icons/debitcard.svg" alt="img" class="me-2">
											Tarjeta
										</a>
										<input type="hidden" name="tarjeta" value="tarjeta">
									</li>
								</ul>

							</div>
							<div th:if="${fullNamePatient} != null" id="venta" style="cursor: pointer;" class="btn-totallabel">
								<h5>Vender</h5>
							</div>
							<script>
								var div = document.getElementById("venta");
								div.addEventListener("click" ,  function() {
									var formulario = document.getElementById("myForm");
									var elementos = formulario.elements;
									var inputs = Array.from(elementos).filter(function(elemento) {
										return elemento.tagName === 'INPUT';
									});
									var inputMedicine = [ ];
									var inputCantidad= [ ];
									inputs.forEach(function(input) {
										if(input.name !== "mas" && input.name!=="menos"){
											inputMedicine.push(input.name);
											inputCantidad.push(input.value);
										}
									});
									console.log(inputMedicine);
									console.log(inputCantidad);

									//Validacion Front (no números negativos)
									var valoresValidos = true;

// Validar inputMedicine y inputCantidad
									inputMedicine.forEach(function(valor, indice) {
										// Verificar si el valor no es un número entero o es negativo
										if (isNaN(valor) || !Number.isInteger(Number(valor)) || Number(valor) < 0) {
											console.log("El valor en inputMedicine[" + indice + "] no es un número entero positivo.");
											valoresValidos = false;
										}
									});

									inputCantidad.forEach(function(valor, indice) {
										// Verificar si el valor no es un número entero o es negativo
										if (isNaN(valor) || !Number.isInteger(Number(valor)) || Number(valor) < 0) {
											console.log("El valor en inputCantidad[" + indice + "] no es un número entero positivo.");
											valoresValidos = false;
										}
									});
									//Validar que haya algo en el carrito
									$.ajax({
										url: '/pharmacist/getAllCarrito',
										type: 'GET',
										success: function (response) {
											let flsmdfr = 0 ;
											let listaMedicamentos = response;
											// Realiza acciones con los datos, como mostrarlos en la consola
											flsmdfr = listaMedicamentos.length;
											if(valoresValidos && flsmdfr !== 0){
												//Ahora enviamos por ajax al servidor
												$.ajax({
													url: "/pharmacist/GenerarVenta",
													data: JSON.stringify( {
														ids: inputMedicine,
														cantidades: inputCantidad
													}),
													contentType: "application/json",
													type: "POST",
													success: function(response){
														switch(response.error){
															case "":
																Swal.fire({
																	icon: "success",
																	iconColor: '#f69b00',
																	showCancelButton: false
																	, confirmButtonColor: '#d48e15',
																	cancelButtonColor: '#805409',
																	title: "Venta concluida",
																	text: "Se concreto correctamente la venta",
																}).then(function() {
																	window.location.href= "/pharmacist/verProductList";
																});
																break;

															case "errorInesperado":
																Swal.fire({
																	icon: "error",
																	iconColor:"#f69b00" ,
																	showCancelButton: false
																	, confirmButtonColor: '#d48e15',
																	cancelButtonColor: '#805409',
																	cancelButtonText: "Salir",
																	text: "Ocurrio un error inesperado ",
																});
																break;
															case "noHaySuficienteStock":
																Swal.fire({
																	icon: "error",
																	iconColor:"#f69b00" ,
																	showCancelButton: false
																	, confirmButtonColor: '#d48e15',
																	cancelButtonColor: '#805409',
																	cancelButtonText: "Salir",
																	text: "No hay suficiente stock como para realizar esta venta",
																});
																break;
														}
													}
												});
											}else{
												console.log("holaaaaa");
												Swal.fire({
													icon: "warning",
													showCancelButton: true
													, confirmButtonColor: '#d48e15',
													cancelButtonColor: '#805409',
													cancelButtonText: "Salir",
													text: "Debes escoger algun producto",
												});
											}
										},
										error: function (error) {
											console.error('There was a problem with the request:', error);
										}
									});




								});
							</script>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="calculator" tabindex="-1"   aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Define Quantity</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="calculator-set">
					<div class="calculatortotal">
						<h4>0</h4>
					</div>
					<ul>
						<li>
							<a href="javascript:void(0);">1</a>
						</li>
						<li>
							<a href="javascript:void(0);">2</a>
						</li>
						<li>
							<a href="javascript:void(0);">3</a>
						</li>
						<li>
							<a href="javascript:void(0);">4</a>
						</li>
						<li>
							<a href="javascript:void(0);">5</a>
						</li>
						<li>
							<a href="javascript:void(0);">6</a>
						</li>
						<li>
							<a href="javascript:void(0);">7</a>
						</li>
						<li>
							<a href="javascript:void(0);">8</a>
						</li>
						<li>
							<a href="javascript:void(0);">9</a>
						</li>
						<li>
							<a href="javascript:void(0);" class="btn btn-closes"><img src="/assets_superAdmin/img/icons/close-circle.svg" alt="img"></a>
						</li>
						<li>
							<a href="javascript:void(0);">0</a>
						</li>
						<li>
							<a href="javascript:void(0);" class="btn btn-reverse"><img src="/assets_superAdmin/img/icons/reverse.svg" alt="img"></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="holdsales" tabindex="-1"    aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Hold order</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="hold-order">
					<h2>4500.00</h2>
				</div>
				<div class="form-group">
					<label>Order Reference</label>
					<input type="text">
				</div>
				<div class="para-set">
					<p>The current order will be set on hold. You can retreive this order from the pending order button. Providing a reference to it might help you to identify the order more quickly.</p>
				</div>
				<div class="col-lg-12">
					<a class="btn btn-submit me-2">Submit</a>
					<a class="btn btn-cancel" data-bs-dismiss="modal">Cancel</a>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="edit" tabindex="-1"    aria-hidden="true">
	<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Edit Order</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Product Price</label>
							<input type="text" value="20">
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Product Price</label>
							<select class="select">
								<option>Exclusive</option>
								<option>Inclusive</option>
							</select>
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label> Tax</label>
							<div class="input-group">
								<input type="text">
								<a class="scanner-set input-group-text">
									%
								</a>
							</div>
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Discount Type</label>
							<select class="select">
								<option>Fixed</option>
								<option>Percentage</option>
							</select>
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Discount</label>
							<input type="text" value="20">
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Sales Unit</label>
							<select class="select">
								<option>Kilogram</option>
								<option>Grams</option>
							</select>
						</div>
					</div>
				</div>
				<div class="col-lg-12">
					<a class="btn btn-submit me-2">Submit</a>
					<a class="btn btn-cancel" data-bs-dismiss="modal">Cancel</a>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="create" tabindex="-1" aria-labelledby="create"  aria-hidden="true">
	<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Ingresar cliente</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="card">
					<div class="card-body">
							<div class="row">
								<div class="col-lg-6 col-sm-12 col-12">
									<div class="form-group">
										<label>DNI</label>
										<input id="dni" name="dni" type="text">
									</div>
								</div>
								<div class="col-lg-3 col-sm-6 col-12">
									<div class="form-group">
										<label for="doctor">Doctor</label>
										<select name="idDoctor" id="doctor">
											<option th:each="doctor :${listaDoctores}"
													th:value="${doctor.getIdDoctor()}"
													th:text="${doctor.getName()}+' '+${doctor.getLastName()}">
											</option>
										</select>
									</div>
								</div>
							</div>
					</div>
				</div>
				<div class="col-lg-12">
					<button th:id="aux" type="button" class="btn btn-submit me-2" >Ingresar</button>
					<script>
						document.getElementById("aux").onclick = function() {
							data = {
								 dni :  document.getElementById("dni").value , doctor:document.getElementById("doctor").value
							}
							console.log(data);
							$.ajax({
								url: "/pharmacist/confirmarDatosPaciente",
								type: "POST",
								data: data,
								success: function(response){
									console.log(response);
									var aux ;
									response.forEach(function (error) {
										aux = JSON.parse(error);
									});
									console.log("Me respondieon");
									switch(aux.error){
										case "":
											window.location.href = "/pharmacist/posFarmacista";
											//Recarga
											break;
										case "noEncontro":
											Swal.fire({
												colorIcon:'#805409'  ,
												showCancelButton: true,
												confirmButtonText: 'Ok',
												cancelButtonText: 'Cancelar',
												confirmButtonColor: '#d48e15',
												cancelButtonColor: '#805409',
												icon: "error",
												iconColor: '#805409',
												title: "Oops...",
												text: "No se encontró ningún paciente con ese número de dni",
											});
											break;
										case "casteo":
											Swal.fire({
												colorIcon:'#805409'  ,
												showCancelButton: true,
												confirmButtonText: 'Ok',
												confirmButtonColor: '#d48e15',
												icon: "error",
												iconColor: '#805409',
												title: "Oops...",
												text: "Se ingreso un número incoherente",
											});
											break;
									}
								}
							})
						}
					</script>
					<a class="btn btn-cancel" data-bs-dismiss="modal">Cancelar</a>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="pre-orden" tabindex="-1" aria-labelledby="pre-orden"  aria-hidden="true">
	<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Pre-Orden</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Nombre</label>
							<input type="text">
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Apellido</label>
							<input type="text">
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Edad</label>
							<input type="text">
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Seguro</label>
							<input type="text">
						</div>
					</div>

					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Doctor</label>
							<input type="text" >
						</div>
					</div>

					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Medicamento</label>
							<input type="text" >
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Cantidad</label>
							<input type="text" >
						</div>
					</div>
					<div class="col-lg-6 col-sm-12 col-12">
						<div class="form-group">
							<label>Dirección</label>
							<input type="text" >
						</div>
					</div>

				</div>
				<div class="col-lg-12">
					<a class="btn btn-submit me-2">Generar</a>
					<a class="btn btn-cancel" data-bs-dismiss="modal">Cancelar</a>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="delete" tabindex="-1"    aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Order Deletion</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="delete-order">
					<img src="/assets_superAdmin/img/icons/close-circle1.svg" alt="img">
				</div>
				<div class="para-set text-center">
					<p>The current order will be deleted as no payment has been <br> made so far.</p>
				</div>
				<div class="col-lg-12 text-center">
					<a class="btn btn-danger me-2">Yes</a>
					<a class="btn btn-cancel" data-bs-dismiss="modal">No</a>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="recents" tabindex="-1"    aria-hidden="true">
	<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" >Recent Transactions</h5>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="tabs-sets">
					<ul class="nav nav-tabs" id="myTabs" role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link active" id="purchase-tab" data-bs-toggle="tab" data-bs-target="#purchase" type="button"   aria-controls="purchase" aria-selected="true" role="tab">Purchase</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="payment-tab" data-bs-toggle="tab" data-bs-target="#payment" type="button"   aria-controls="payment" aria-selected="false" role="tab">Payment</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="return-tab" data-bs-toggle="tab" data-bs-target="#return" type="button"   aria-controls="return" aria-selected="false" role="tab">Return</button>
						</li>
					</ul>
					<div class="tab-content" >
						<div class="tab-pane fade show active" id="purchase" role="tabpanel" aria-labelledby="purchase-tab">
							<div class="table-top">
								<div class="search-set">
									<div class="search-input">
										<a class="btn btn-searchset"><img src="/assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
									</div>
								</div>
								<div class="wordset">
									<ul>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="pdf"><img src="/assets_superAdmin/img/icons/pdf.svg" alt="img"></a>
										</li>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="excel"><img src="/assets_superAdmin/img/icons/excel.svg" alt="img"></a>
										</li>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="print"><img src="/assets_superAdmin/img/icons/printer.svg" alt="img"></a>
										</li>
									</ul>
								</div>
							</div>
							<div class="table-responsive">
								<table class="table datanew">
									<thead>
									<tr>
										<th>Date</th>
										<th>Reference</th>
										<th>Customer</th>
										<th>Amount	</th>
										<th class="text-end">Action</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>2022-03-07	</td>
										<td>INV/SL0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>INV/SL0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>INV/SL0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>INV/SL0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>INV/SL0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>INV/SL0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>INV/SL0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="tab-pane fade" id="payment" role="tabpanel" >
							<div class="table-top">
								<div class="search-set">
									<div class="search-input">
										<a class="btn btn-searchset"><img src="/assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
									</div>
								</div>
								<div class="wordset">
									<ul>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="pdf"><img src="/assets_superAdmin/img/icons/pdf.svg" alt="img"></a>
										</li>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="excel"><img src="/assets_superAdmin/img/icons/excel.svg" alt="img"></a>
										</li>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="print"><img src="/assets_superAdmin/img/icons/printer.svg" alt="img"></a>
										</li>
									</ul>
								</div>
							</div>
							<div class="table-responsive">
								<table class="table datanew">
									<thead>
									<tr>
										<th>Date</th>
										<th>Reference</th>
										<th>Customer</th>
										<th>Amount	</th>
										<th class="text-end">Action</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>2022-03-07	</td>
										<td>0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0102</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0103</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0104</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0105</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0106</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0107</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="tab-pane fade" id="return" role="tabpanel" >
							<div class="table-top">
								<div class="search-set">
									<div class="search-input">
										<a class="btn btn-searchset"><img src="/assets_superAdmin/img/icons/search-white.svg" alt="img"></a>
									</div>
								</div>
								<div class="wordset">
									<ul>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="pdf"><img src="/assets_superAdmin/img/icons/pdf.svg" alt="img"></a>
										</li>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="excel"><img src="/assets_superAdmin/img/icons/excel.svg" alt="img"></a>
										</li>
										<li>
											<a data-bs-toggle="tooltip" data-bs-placement="top" title="print"><img src="/assets_superAdmin/img/icons/printer.svg" alt="img"></a>
										</li>
									</ul>
								</div>
							</div>
							<div class="table-responsive">
								<table class="table datanew">
									<thead>
									<tr>
										<th>Date</th>
										<th>Reference</th>
										<th>Customer</th>
										<th>Amount	</th>
										<th class="text-end">Action</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>2022-03-07	</td>
										<td>0101</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0102</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0103</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0104</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0105</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0106</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									<tr>
										<td>2022-03-07	</td>
										<td>0107</td>
										<td>Walk-in Customer</td>
										<td>$ 1500.00</td>
										<td>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/eye.svg" alt="img">
											</a>
											<a class="me-3" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/edit.svg" alt="img">
											</a>
											<a class="me-3 confirm-text" href="javascript:void(0);">
												<img src="/assets_superAdmin/img/icons/delete.svg" alt="img">
											</a>
										</td>
									</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	document.addEventListener('click', (event) => {
		if (event.target.classList.contains('menos')) {
			const quantityField = event.target.nextElementSibling;
			let currentQuantity = parseInt(quantityField.value);
			if (currentQuantity > 1) {
				quantityField.value = currentQuantity - 1;
			}
			const idMedicine=  parseInt((quantityField.id).substring(3));
			const newCantidad = quantityField.value;

			$.ajax({
				url: '/pharmacist/updateCantidad?'+ "idProduct=" + idMedicine+"&newCantidad="+newCantidad,
				type: 'GET',
				success: function (response) {
					$.ajax({
						url: '/pharmacist/getAllCarrito',
						type: 'GET',
						success: function (response) {
							var listaMedicamentos = response;
							let total = 0 ;
							listaMedicamentos.forEach(function(medicamento) {
								total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
							});
							var miDiv = document.getElementById('total');
							miDiv.textContent = 'S/.' + total.toFixed(2);
							var miDivTwo = document.getElementById('totalProductojpg');
							miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

							//totalProductojpg
							//productset
							//"${medicamento.getIdMedicine()}"
						},
						error: function (error) {
							console.error('There was a problem with the request:', error);
						}
					});
				},
				error: function (error) {
					console.error('There was a problem with the request:', error);
				}
			});
		} else if (event.target.classList.contains('mas')) {
			const quantityField = event.target.previousElementSibling;
			let currentQuantity = parseInt(quantityField.value);
			quantityField.value = currentQuantity + 1;
			const idMedicine=  parseInt((quantityField.id).substring(3));
			const newCantidad = quantityField.value;

			$.ajax({
				url: '/pharmacist/updateCantidad?'+ "idProduct=" + idMedicine+"&newCantidad="+newCantidad,
				type: 'GET',
				success: function (response) {
					$.ajax({
						url: '/pharmacist/getAllCarrito',
						type: 'GET',
						success: function (response) {
							var listaMedicamentos = response;
							let total = 0 ;
							listaMedicamentos.forEach(function(medicamento) {
								total = total + (medicamento.idMedicine.price)* (medicamento.cantidad);
							});
							var miDiv = document.getElementById('total');
							miDiv.textContent = 'S/.' + total.toFixed(2);
							var miDivTwo = document.getElementById('totalProductojpg');
							miDivTwo.textContent = "Total de productos: " + listaMedicamentos.length;

							//totalProductojpg
							//productset
							//"${medicamento.getIdMedicine()}"
						},
						error: function (error) {
							console.error('There was a problem with the request:', error);
						}
					});
				},
				error: function (error) {
					console.error('There was a problem with the request:', error);
				}
			});

		}
	});
</script>

<!-- jQuery -->
<script src="/assets_superAdmin/js/jquery-3.6.0.min.js"></script>

<!-- Feather Icon JS -->
<script src="/assets_superAdmin/js/feather.min.js"></script>

<!-- Slimscroll JS -->
<script src="/assets_superAdmin/js/jquery.slimscroll.min.js"></script>

<!-- Bootstrap Core JS -->
<script src="/assets_superAdmin/js/bootstrap.bundle.min.js"></script>

<!-- Datatable JS -->
<script src="/assets_superAdmin/js/jquery.dataTables.min.js"></script>
<script src="/assets_superAdmin/js/dataTables.bootstrap4.min.js"></script>

<!-- Select2 JS -->
<script src="/assets_superAdmin/plugins/select2/js/select2.min.js"></script>

<!-- Owl JS -->
<script src="/assets_superAdmin/plugins/owlcarousel/owl.carousel.min.js"></script>

<!-- Sweetalert 2 -->
<script src="/assets_superAdmin/plugins/sweetalert/sweetalert2.all.min.js"></script>
<script src="/assets_superAdmin/plugins/sweetalert/sweetalerts.min.js"></script>

<!-- Custom JS -->
<script src="/assets_superAdmin/js/script.js"></script>

</body>
</html>